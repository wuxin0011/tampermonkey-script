// ==UserScript==
// @name         直播插件
// @namespace    https://github.com/wuxin0011/huya-live
// @version      4.0.4
// @author       wuxin0011
// @description  虎牙、斗鱼，哔哩哔哩 页面简化，屏蔽主播,关闭抖音提示登录
// @license      MIT
// @icon         https://cdn.staticaly.com/gh/wuxin0011/blog-resource@main/picgo/icon.png
// @source       https://github.com/wuxin0011/huya-live
// @supportURL   https://github.com/wuxin0011/huya-live/issues
// @match        https://*.douyin.com/*
// @match        https://*.douyu.com/*
// @match        https://*.huya.com/*
// @match        https://*.bilibili.com/*
// @match        https://www.douyu.com/*
// @match        https://www.huya.com/*
// @match        https://www.bilibili.com/*
// @match        https://www.douyin.com/*
// @grant        GM_addStyle
// ==/UserScript==

(function () {
  'use strict';

  const prefix = "[live-plugin]:";
  const msg = (...args) => `${prefix} ${args}`;
  const emptyMethod = (...args) => {
  };
  const log = (...args) => console.log(msg(args));
  const warn = (...args) => console.warn(msg(args));
  const error = (...args) => console.error(msg(args));
  const douyu_address_pattern = /^https:\/\/.*\.douyu\.((com)|(cn)).*/;
  const bilibili_address_pattern = /^https:\/\/.*\.bilibili\..*/;
  const huya_address_pattern = /^https:\/\/.*\.huya\.((com)|(cn)).*/;
  const douyin_address_pattern = /^https:\/\/.*\.douyin\.((com)|(cn)).*/;
  const localhost = /^http:\/\/127\.0\.0\.1\.*|^http:\/\/localhost.*/;
  const local_url = window.location.href;
  const is_huya = huya_address_pattern.test(local_url);
  const is_douyu = douyu_address_pattern.test(local_url);
  const is_bilibili = bilibili_address_pattern.test(local_url);
  const is_douyin = douyin_address_pattern.test(local_url);
  const is_localhost = localhost.test(local_url);
  const wd = window.document;
  const wls = window.localStorage;
  const download_plugin_url = "https://greasyfork.org/zh-CN/scripts/449261-%E8%99%8E%E7%89%99%E7%9B%B4%E6%92%AD";
  const source_code_url = "https://github.com/wuxin0011/huya-live";
  const isImage = (file) => /.*(\.(png|jpg|jpeg|apng|avif|bmp|gif|ico|cur|svg|tiff|webp))$/.test(file);
  const querySelector = (el, sel) => !!el && !!sel && el instanceof HTMLElement ? el.querySelector(sel) : el ? wd.querySelector(el) : emptyMethod;
  const querySelectorAll = (el, sel) => !!el && !!sel && el instanceof HTMLElement ? el.querySelectorAll(sel) : el ? wd.querySelectorAll(el) : emptyMethod;
  const addEventListener = (el, type, callback) => !!el && type && typeof callback === "function" ? el === wd || el instanceof HTMLElement ? el.addEventListener(type, callback, false) : false : false;
  const createElement = (tag) => !!tag && wd.createElement(tag);
  const appendChild = (el1, el2) => !!el1 && !!el2 && el1 instanceof HTMLElement && el2 instanceof HTMLElement && el1.appendChild(el2);
  const insertChild = (el1, el2) => !!el1 && !!el2 && el1 instanceof HTMLElement && el2 instanceof HTMLElement && el1.insertBefore(el2, el1.firstChild);
  const addStyle = (str) => {
    if ((window == null ? void 0 : window.GM_addStyle) && typeof window.GM_addStyle == "function") {
      window.GM_addStyle(str);
    } else {
      let head = querySelector("head");
      let style = createElement("style");
      style.innerText = str;
      head.appendChild(style);
    }
  };
  const removeDOM = (element, realRemove = false) => {
    try {
      if (!(element instanceof HTMLElement)) {
        element = querySelector(element);
      }
      if (element instanceof HTMLElement) {
        element.style.display = "none";
        if (realRemove) {
          element.remove();
        }
      }
    } catch (e) {
      error(e);
    }
  };
  const s2d = (string) => new DOMParser().parseFromString(string, "text/html").body.childNodes[0];
  const isArray = (a) => a && (a == null ? void 0 : a.length) > 0;
  const timeoutSelectorAll = (selector, callback, time = 0) => {
    if (typeof callback != "function") {
      warn("callback should is a function!");
      return;
    }
    setTimeout(() => {
      const nodes = querySelectorAll(selector);
      if (isArray(nodes)) {
        callback(nodes);
      }
    }, time);
  };
  const timeoutSelectorAllOne = (selector, callback, time = 0) => {
    if (typeof callback != "function") {
      warn("callback should is a function!");
      return;
    }
    setTimeout(() => {
      const nodes = querySelectorAll(selector);
      if (isArray(nodes)) {
        for (let node of nodes) {
          callback(node);
        }
      }
    }, time);
  };
  const getLocalStore = (k, type = Array.name, isParse = true) => {
    let obj = wls.getItem(k);
    if (type === Array.name) {
      if (isParse && obj) {
        obj = JSON.parse(obj);
      }
      return Array.isArray(obj) ? obj : [];
    }
    if (type === Object.name) {
      if (isParse && obj) {
        obj = JSON.parse(obj);
      }
      return obj ? obj : {};
    }
    if (type === String.name) {
      return obj ? obj : "";
    }
    if (type === Boolean.name) {
      return obj === "true" || obj === true;
    }
    return obj;
  };
  const addLocalStore = (k, v = [], type = Array.name, isParse = true) => (type === Object.name || type === Array.name) && isParse ? wls.setItem(k, JSON.stringify(v)) : wls.setItem(k, v);
  const removeVideo = (selector, time1 = 100, maxCount = 1e3) => {
    let count = 0;
    let video_timer = setInterval(() => {
      try {
        const video = querySelector(selector);
        if (video && video instanceof HTMLVideoElement) {
          video.pause();
        }
        removeDOM(video, false);
        if (count >= maxCount) {
          clearInterval(video_timer);
        }
        count = count + 1;
      } catch (e) {
      }
    }, time1);
  };
  const throttle = (wait, func, ...args) => {
    let pre = Date.now();
    return () => {
      if (Date.now() - pre > wait) {
        func(...args);
        pre = Date.now();
      }
    };
  };
  const intervalRemoveElement = (selectors, time = 160, maxCount = 1e3) => {
    if (!isArray(selectors)) {
      warn(`selectors 必须是数组 : ${selectors}`);
      return;
    }
    let count = 0;
    let timer = setInterval(() => {
      selectors.forEach((sel) => {
        removeDOM(sel, true);
      });
      if (count >= maxCount) {
        clearInterval(timer);
        return;
      }
      count = count + 1;
    }, time);
  };
  const loopDo = (callback, count = 100, wait = 100) => {
    if (typeof callback != "function") {
      warn("callback is a function!");
      return;
    }
    let timer = setInterval(() => {
      count--;
      if (count === 0) {
        clearInterval(timer);
      } else {
        callback(timer);
      }
    }, wait);
  };
  const findMark = (selector, callback, count = 100, wait = 100) => {
    if (!selector) {
      warn("selector not allow  or null !");
      return;
    }
    if (typeof callback != "function") {
      warn("callback is a function!");
      return;
    }
    loopDo((timer) => {
      try {
        let element = selector instanceof HTMLElement ? selector : querySelector(selector);
        if (element && element instanceof HTMLElement) {
          let isMark = element.getAttribute("mark");
          if (!isMark) {
            element.setAttribute("mark", true);
            callback(element);
          } else {
            clearInterval(timer);
          }
        }
      } catch (e) {
        clearInterval(timer);
        error(e);
      }
    }, 100, 100);
    setTimeout(() => {
      let element = selector instanceof HTMLElement ? selector : querySelector(selector);
      if (element && element instanceof HTMLElement) {
        let isMark = element.getAttribute("mark");
        if (!isMark) {
          element.setAttribute("mark", true);
          callback(element);
        }
      }
    }, 5e3);
  };
  const setTimeoutMark = (selector, callback, wait = 0) => {
    if (!selector) {
      warn("selector not allow  or null !");
      return;
    }
    if (typeof callback != "function") {
      warn("callback is a function!");
      return;
    }
    let timer = setTimeout(() => {
      try {
        let element = selector instanceof HTMLElement ? selector : querySelector(selector);
        if (element && element instanceof HTMLElement) {
          let isMark = element.getAttribute("mark");
          if (!isMark) {
            element.setAttribute("mark", true);
            callback(element);
          } else {
            clearInterval(timer);
          }
        }
      } catch (e) {
        clearInterval(timer);
        error(e);
      }
    }, wait);
  };
  const backgroundNone = (element, selectors = [".layout-Main"], time = 100, maxCount = 500) => {
    if (!(element instanceof HTMLElement) || !isArray(selectors)) {
      warn(`element 参数应是 元素， selector 应该是元素选择器集合`);
      return;
    }
    let count = 0;
    let timer = setInterval(() => {
      selectors.forEach((sel) => {
        let b = querySelector(element, sel);
        if (!(b instanceof HTMLElement)) {
          return;
        }
        b.style.backgroundImage = "none";
      });
      if (count >= maxCount) {
        clearInterval(timer);
        return;
      }
      count = count + 1;
    }, time);
  };
  const uploadImage = (file, callback) => {
    try {
      if (!isImage(file == null ? void 0 : file.name)) {
        return alert("图片格式不正确！");
      }
      let fileReader = new FileReader();
      fileReader.readAsDataURL(file);
      fileReader.onerror = (e) => {
        return alert("图片解析失败！" + JSON.stringify(e));
      };
      fileReader.onload = (e) => {
        let base64 = e.target.result;
        let str = base64.slice(base64.indexOf(",") + 1);
        if (atob) {
          str = atob(str);
          let bytes = str.length;
          const size = (bytes / (1024 * 1024)).toFixed(2);
          if (size > 5) {
            if (confirm("图片保存失败，浏览器最大只能保存5MB大小图片，确认查看原因？")) {
              window.location.href = "https://developer.mozilla.org/zh-CN/docs/Web/API/File_and_Directory_Entries_API/Introduction";
            }
            return;
          }
          callback(base64);
        } else {
          alert("保存失败，当前浏览器不支持！");
        }
      };
    } catch (e) {
      alert("图片解析失败！");
    }
  };
  const findButton = (sel = "body", key = "full_screen_button_class_or_id", text = "全屏", tagName = "div") => {
    var _a, _b;
    const container = querySelector(sel);
    let classId = "";
    if (container) {
      const fullButton = querySelector(container, key);
      if (fullButton && fullButton instanceof HTMLElement && ((fullButton == null ? void 0 : fullButton.textContent) === text || (fullButton == null ? void 0 : fullButton.title) === text)) {
        classId = `${sel} ${fullButton.id ? fullButton.id : fullButton.className}`;
      }
      if (!classId) {
        const nodes = querySelectorAll(container, tagName);
        if (isArray(nodes)) {
          for (let i = 0; i < nodes.length; i++) {
            if (nodes[i] && nodes[i] instanceof HTMLElement && (((_a = nodes[i]) == null ? void 0 : _a.title) === text || ((_b = nodes[i]) == null ? void 0 : _b.textContent) === text)) {
              classId = `${sel} ${nodes[i].id ? nodes[i].id : nodes[i].className}`;
            }
          }
        }
      }
    }
    if (key && classId) {
      addLocalStore(key, classId, String.name, false);
    }
    return classId || key;
  };
  const handlerPromise = (result, callback) => {
    if (typeof callback !== "function") {
      warn("回调函数不能为空！");
      return;
    }
    if (!result) {
      warn("请求结果为空！");
      callback(result);
      return;
    }
    if (result instanceof Promise) {
      result.then((res) => {
        callback(res);
      }).catch((e) => {
        error(e);
      });
    } else {
      callback(result);
    }
  };
  const handlerDisplay = (element, isBlock) => {
    if (!(element && element instanceof HTMLElement)) {
      return;
    }
    if (isBlock) {
      if (!element.classList.contains("m-container-display-block")) {
        element.classList.add("m-container-display-block");
      }
      if (element.classList.contains("m-container-display-none")) {
        element.classList.remove("m-container-display-none");
      }
    } else {
      if (element.classList.contains("m-container-display-block")) {
        element.classList.remove("m-container-display-block");
      }
      if (!element.classList.contains("m-container-display-none")) {
        element.classList.add("m-container-display-none");
      }
    }
  };
  const support = {
    supportSearch() {
      return !is_douyin;
    },
    supportAdd() {
      return !is_douyin;
    },
    supportReset() {
      return !is_douyin;
    },
    supportBg() {
      return !is_douyin && !is_bilibili;
    },
    supportMenu() {
      return !is_douyin && !is_bilibili;
    },
    supportGift() {
      return !is_douyin && !is_bilibili;
    },
    supportAutoFullScreen() {
      return true;
    },
    supportAutoViewMaxPro() {
      return true;
    },
    supportTable() {
      return !is_douyin;
    }
  };
  class HostUser {
    constructor(roomId, name) {
      this.roomId = roomId;
      this.name = name;
    }
  }
  const iconLogo = () => {
    let logo = "none";
    if (is_douyu) {
      logo = `<svg t="1694231763777" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5947" width="40" height="40"><path d="M838.45600394 295.68265482c63.56182914-60.97275259 162.72346075-74.95376592 162.72346075-74.95376593s-6.08432987-74.95376592-101.10343901-106.41104592c-136.57378765-43.49648592-212.17482272 19.41807408-212.17482272 19.41807406S517.15160494 3.24645925 346.53146074 92.18123852s-291.27111111 332.04906667-291.27111111 332.04906666c65.63309037 81.03809581 234.31142717 82.9799032 234.31142717 81.68536495-20.0653432 4.66033778-51.5226232 28.73874963-49.58081582 28.73874962-71.58796642-20.71261235-236.25323457 74.95376592-210.88028445 141.88139456 26.14967309 66.92762864 257.74256987 49.58081581 257.74256989 49.58081582s47.50955457 35.47034864 37.54160988 35.47034863c-124.53458173-10.09739852-144.59992494 55.53569185-144.59992494 57.60695309 31.45728 0 222.27222124 51.5226232 222.27222122 51.52262321s31.45728 135.92651852 61.62002173 137.86832592c29.51547259 2.07126124 55.53569185-49.58081581 55.53569185-51.5226232 37.54160987-37.54160987 27.44421136-116.50844445 24.07841186-120.52151309 18.12353581-10.09739852 101.10343902-35.47034864 245.70336395-187.44914172s55.40623803-349.3958795 49.45136197-353.40894815z m-805.97952789 371.53248394c0-81.03809581 186.15460347-140.5868563 186.80187259-124.53458173-24.07841185 56.95968395 0 96.44310124 0 96.44310124l-37.54160988 33.52854123 51.52262321 2.07126125s29.51547259 41.55467852 31.45728 43.49648592c-131.91344987 11.9097521-228.87436642-14.23992098-232.24016592-51.00480791zM223.29141728 653.10467161v8.67340642h-8.02613728l8.02613728-8.67340642z m204.14868544 121.16878222c-2.07126124 6.08432987-20.71261235 12.03920592-20.71261236 12.03920592l-4.01306864-12.03920592c-0.12945383 0 26.66748839-5.30760691 24.725681 0z" fill="#999999" p-id="5948"></path><path d="M361.80701235 124.28578765c-48.80409283 0-88.41696395 36.76488691-88.41696396 82.97990321s39.48341728 82.9799032 88.41696396 82.97990322 88.41696395-36.76488691 88.41696395-82.97990322-39.61287111-82.9799032-88.41696395-82.97990321z m0 141.88139457c-11.3919368 0-23.43114272-3.3657995-32.75181827-10.09739852 11.3919368 0 20.71261235-9.32067555 20.71261234-20.71261234s-9.32067555-20.71261235-20.71261234-20.71261234c-10.74466765 0-19.41807408 8.02613728-20.71261236 18.1235358-4.01306864-8.02613728-6.08432987-16.6995437-6.08432987-26.14967309 0-32.75181827 26.79694222-58.90149136 59.5487605-58.90149136h5.3076069c-11.3919368 6.08432987-19.41807408 18.12353581-19.41807407 32.10454913 0 20.0653432 16.6995437 36.76488691 36.76488691 36.76488692 16.05227457 0 30.16274173-10.09739852 34.82307951-24.72568099 1.29453827 4.66033778 2.07126124 10.09739852 2.07126123 14.7577363 0 33.52854124-26.79694222 59.5487605-59.54876048 59.54876049z m-22.13660445 204.14868543s27.44421136 18.12353581 75.60103506 0l-18.1235358-25.37295012c0.12945383 0-57.47749925 25.37295013-57.47749926 25.37295012z m115.21390618-62.91456c-14.11046717 14.11046717-49.58081581 31.45728-49.58081581 31.45728s51.5226232 29.51547259 63.56182914 21.35988149c12.03920592-7.24941431-9.96794469-50.74590025-13.98101333-52.81716149z m43.49648592-33.3990874c-12.03920592 11.3919368-37.54160987 29.51547259-37.54160987 29.51547258l47.50955456 35.47034865c10.09739852-12.16865975-1.94180741-64.98582124-9.96794469-64.98582123z m22.00715061-31.45728c-2.07126124 9.32067555-13.33374419 23.43114272-17.34681283 26.14967308 10.74466765 5.30760691 28.73874963 24.72568098 28.73874963 24.72568098 11.3919368-16.05227457-3.23634569-48.1568237-11.3919368-50.87535406z" fill="#FFFFFF" p-id="5949"></path><path d="M777.48325136 240.7942321c8.02613728-2.07126124 53.59388445 45.56774717 47.50955456 47.50955457 77.6722963-85.05116445 146.54173235-82.9799032 146.54173235-85.05116445-20.0653432-51.5226232-113.14264494-74.95376592-113.14264494-74.95376592-140.5868563-25.37295013-158.7103921 37.54160987-162.72346075 39.48341728-162.72346075-118.45025185-317.29133037-47.50955457-315.34952295-49.5808158 105.11650765 23.43114272 75.60103506 108.48230717 75.60103506 108.48230716s-14.11046717 85.05116445-111.07138371 73.01195853c-97.09037037-12.03920592-81.03809581-120.52151309-81.0380958-120.5215131-97.7376395 78.96683457-186.80187259 241.04302617-186.8018726 241.04302616 10.09739852 16.05227457 119.09752098 53.59388445 154.56786964 55.53569186 210.23301531-4.01306864 325.31746765-217.61188347 329.33053629-217.61188345 44.79102419 73.01195852 33.52854124 148.61299358-12.03920593 187.44914173-48.54518518 41.55467852-186.41351111 44.14375506-186.4135111 44.14375506 20.0653432 52.16989235 161.29946864 30.81001086 161.29946865 30.81001086C519.09341235 592.13191902 360.38302024 615.56306173 354.42814419 615.56306173 519.09341235 688.57502025 655.6672 539.96202667 657.60900741 537.89076543c-9.32067555 71.58796642-112.49537581 117.15571358-114.43718322 117.15571359 12.03920592 56.95968395-99.03217778 153.9206005-140.58685629 145.8944632-101.10343902-43.49648592-170.74959803 2.07126124-170.74959804 2.07126125l93.07730174 25.37295011s97.09037037 10.09739852 101.10343901 49.58081581 37.54160987 86.99297185 41.55467853 86.99297185c97.09037037-70.94069728 47.50955457-133.85525728 47.50955456-133.85525729s184.73061136-73.01195852 287.9053116-271.07631408-33.52854124-317.29133037-25.50240394-319.23313777zM730.62096592 181.89274075c-31.45728-8.02613728-7.37886815-24.07841185 18.1235358-37.54160989 86.99297185-28.73874963 129.84218864 6.73159902 127.90038124 6.73159901-100.45616987-41.55467852-146.02391703 30.81001086-146.02391704 30.81001088z" fill="#D8D8D8" p-id="5950"></path><path d="M331.64427061 613.62125431c98.38490864-27.44421136 117.80298272-50.22808494 117.80298272-50.22808492s-91.0060405-56.18296098-139.93958717-56.95968396c-48.80409283-0.64726914-111.84810667 68.22216691-92.43003258 105.76377679 61.62002173 132.56071902 178.77573531 147.96572445 178.7757353 147.96572445 89.06423309-8.02613728 107.05831506-86.99297185 109.1295763-91.0060405-107.70558419 2.07126124-169.97287506-49.45136197-173.33867457-55.53569186z m-80.26137283 35.47034866c10.09739852-26.79694222 70.94069728-79.6141037 70.94069728-79.61410372-10.74466765-10.09739852-70.94069728-29.51547259-70.94069728-29.51547258 14.11046717-6.08432987 81.03809581 20.71261235 81.0380958 20.71261235 60.19602963-32.75181827 66.2803595-16.6995437 66.2803595-16.69954371-40.90740939 9.45012939-147.31845531 105.11650765-147.3184553 105.11650766z" fill="#FFFFFF" p-id="5951"></path><path d="M331.64427061 613.62125431c98.38490864-27.44421136 117.80298272-50.22808494 117.80298272-50.22808492s-91.0060405-56.18296098-139.93958717-56.95968396c-48.80409283-0.64726914-93.72457086 66.2803595-90.35877135 91.65330963 9.32067555 19.41807408 19.41807408 36.76488691 30.16274172 51.52262321 12.03920592-27.44421136 70.29342815-77.6722963 70.29342816-77.6722963-10.74466765-10.09739852-70.94069728-29.51547259-70.94069728-29.51547258 14.11046717-6.08432987 81.03809581 20.71261235 81.03809579 20.71261234 60.19602963-32.75181827 66.2803595-16.6995437 66.28035952-16.6995437-38.83614815 9.32067555-133.85525728 93.07730173-146.54173236 104.4692385 62.91456 84.40389531 145.8944632 95.66637827 145.89446322 95.66637829 89.06423309-8.02613728 107.05831506-73.01195852 109.12957628-77.02502717-107.18776889 1.68289975-169.45505975-49.83972347-172.82085925-55.92405334z" fill="#FFFFFF" p-id="5952"></path><path d="M839.75054222 292.96412445c63.56182914-61.62002173 163.37072987-74.95376592 163.37072987-74.95376593s-6.08432987-74.95376592-101.10343901-107.05831505c-137.2210568-43.49648592-212.82209185 20.0653432-212.82209185 20.0653432S517.79887408 0.39847506 346.40200691 89.46270815 54.48362666 421.51177482 54.48362666 421.51177482c65.63309037 81.03809581 234.31142717 82.9799032 234.31142717 82.33263407-20.0653432 4.66033778-51.5226232 28.73874963-49.58081581 28.73874963-71.58796642-21.35988148-236.25323457 74.95376592-210.88028444 141.88139457 26.14967309 66.92762864 258.38983902 49.58081581 258.389839 49.5808158s47.50955457 35.47034864 37.54160989 35.47034864c-124.53458173-9.32067555-144.59992494 55.53569185-144.59992495 57.60695308 32.10454914 0 222.91949037 51.5226232 222.91949038 51.52262322s32.10454914 136.57378765 61.62002173 138.51559506c30.16274173 2.07126124 55.53569185-49.58081581 55.53569185-51.5226232 37.54160987-37.54160987 28.0914805-116.50844445 24.07841185-120.5215131 18.12353581-10.09739852 101.10343902-35.47034864 246.35063309-188.09641086 144.59992494-151.84933925 55.66514569-350.04314864 49.5808158-354.05621728zM31.82920691 665.14387753c0-81.03809581 186.15460347-141.23412543 186.80187259-124.53458172-24.07841185 57.60695309 0 97.09037037 0 97.09037036l-37.54160987 33.52854124 51.5226232 2.07126123s30.16274173 41.55467852 32.10454914 43.49648593c-132.56071902 11.9097521-228.87436642-14.7577363-232.88743506-51.65207704z m191.46221037-13.98101334v8.67340642h-8.02613728l8.02613728-8.67340642z m204.79595457 121.81605136c-2.07126124 6.08432987-20.71261235 12.03920592-20.71261235 12.03920593l-4.01306864-12.03920593s26.66748839-6.08432987 24.72568099 0z" p-id="5953"></path><path d="M361.80701235 120.91998815c-48.80409283 0-88.41696395 37.54160987-88.41696396 82.97990321s39.48341728 82.9799032 88.41696396 82.97990321 88.41696395-37.54160987 88.41696395-82.97990321-39.61287111-82.9799032-88.41696395-82.97990321z m0 142.65811754c-12.03920592 0-23.43114272-3.3657995-32.75181827-10.09739852 11.3919368 0 20.71261235-9.32067555 20.71261234-20.71261235s-9.32067555-20.71261235-20.71261234-20.71261235c-10.74466765 0-19.41807408 8.02613728-20.71261236 18.1235358-4.01306864-8.02613728-6.08432987-16.6995437-6.08432987-26.14967309 0-32.75181827 26.79694222-59.5487605 59.5487605-59.54876049h6.08432987c-11.3919368 6.08432987-19.41807408 18.12353581-19.41807407 32.10454914 0 20.0653432 16.6995437 36.76488691 36.76488691 36.76488692 16.05227457 0 30.16274173-10.74466765 34.82307951-24.725681 1.29453827 4.66033778 2.07126124 10.09739852 2.07126123 14.7577363-0.77672297 33.39908741-27.57366518 60.19602963-60.32548345 60.19602964z m-22.13660445 204.79595456s28.0914805 18.12353581 75.60103506 0l-18.1235358-25.37295012c0.12945383-0.12945383-57.47749925 25.37295013-57.47749926 25.37295012z m115.8611753-63.56182914c-14.11046717 14.11046717-50.22808494 31.45728-50.22808493 31.45728s52.16989235 29.51547259 63.56182914 22.13660444c12.03920592-8.15559111-9.32067555-51.65207703-13.33374421-53.59388444z m43.49648594-33.52854124c-12.03920592 11.3919368-37.54160987 29.51547259-37.54160989 29.5154726l47.50955458 35.47034864c10.09739852-11.3919368-1.94180741-64.98582124-9.96794469-64.98582124z m22.13660444-31.45728c-2.07126124 9.32067555-13.33374419 23.43114272-17.34681284 26.1496731 10.74466765 5.30760691 28.73874963 24.72568098 28.73874962 24.72568098 11.26248297-16.05227457-3.3657995-48.1568237-11.39193678-50.87535408z" fill="#FFFFFF" p-id="5954"></path><path d="M778.1305205 238.07570173c8.02613728-2.07126124 53.59388445 45.56774717 47.50955456 47.50955457 77.6722963-85.05116445 147.31845531-82.9799032 147.3184553-85.05116445-20.0653432-51.5226232-113.14264494-74.95376592-113.14264493-74.95376593-141.23412543-25.37295013-159.35766124 37.54160987-163.37072988 39.48341728-162.72346075-119.09752098-317.9385995-48.1568237-315.99679209-50.22808493 105.11650765 23.43114272 75.60103506 109.1295763 75.60103505 109.1295763s-14.11046717 85.05116445-111.0713837 73.01195852c-97.09037037-12.03920592-81.68536494-120.52151309-81.68536495-120.52151309C165.68446419 255.55196839 76.62023111 417.49870617 76.62023111 417.49870617c10.09739852 16.05227457 119.09752098 53.59388445 155.34459259 55.53569186 210.23301531-4.01306864 325.9647368-217.61188347 329.3305363-217.61188346 44.79102419 73.01195852 33.52854124 149.26026272-12.03920592 188.09641086-48.93354667 41.55467852-186.80187259 44.27320889-186.8018726 44.27320888 20.0653432 52.16989235 161.94673778 30.81001086 161.94673777 30.81001087-4.66033778 70.94069728-164.01799902 95.01910914-169.32560592 95.01910913 165.31253728 73.01195852 301.88632494-75.60103506 303.95758617-77.67229628-10.09739852 72.23523555-113.14264494 117.80298272-115.08445234 117.80298272 12.03920592 57.60695309-99.03217778 153.9206005-141.23412544 146.54173234-101.10343902-43.49648592-170.74959803 2.07126124-170.74959802 2.07126122l93.72457087 25.37295014s97.7376395 10.09739852 101.10343901 49.5808158c4.01306864 39.48341728 37.54160987 86.99297185 41.55467851 86.99297185 97.7376395-70.94069728 47.50955457-134.50252642 47.50955457-134.50252641s184.73061136-73.01195852 288.55258075-271.72358322-34.30526419-318.58586864-26.27912691-320.00986074z m-46.86228544-59.54876049c-32.10454914-8.02613728-7.37886815-24.07841185 18.1235358-37.54160988 87.64024098-28.73874963 130.48945778 6.73159902 128.54765037 6.73159901-100.45616987-41.55467852-146.67118617 30.81001086-146.67118617 30.81001087z" fill="#D8D8D8" p-id="5955"></path><path d="M331.64427061 611.67944691c98.38490864-27.44421136 118.45025185-50.22808494 118.45025186-50.22808494s-91.65330963-56.18296098-139.93958717-57.60695308c-48.80409283-0.64726914-112.49537581 68.22216691-92.43003258 105.7637768 61.62002173 132.56071902 178.77573531 148.61299358 178.7757353 148.61299356 89.71150222-8.02613728 107.05831506-86.99297185 109.12957629-91.00604049-108.35285333 1.94180741-170.62014419-49.58081581-173.9859437-55.53569185z m-80.26137283 35.47034864c10.09739852-26.79694222 70.94069728-80.39082667 70.94069728-80.39082666-10.74466765-10.09739852-70.94069728-29.51547259-70.94069728-29.51547259 14.11046717-6.08432987 81.68536494 20.71261235 81.68536494 20.71261234 60.97275259-32.75181827 66.2803595-16.6995437 66.2803595-16.6995437-41.55467852 10.09739852-147.96572445 105.89323061-147.96572444 105.89323061z" fill="#9A6E38" p-id="5956"></path><path d="M331.64427061 611.67944691c98.38490864-27.44421136 118.45025185-50.22808494 118.45025186-50.22808494s-91.65330963-56.18296098-139.93958717-57.60695308c-48.80409283-0.64726914-94.37184 66.2803595-91.00604049 91.65330963 9.32067555 19.41807408 19.41807408 36.76488691 30.16274172 51.52262321 12.03920592-27.44421136 70.29342815-78.31956543 70.29342816-78.31956543-10.74466765-10.09739852-70.94069728-29.51547259-70.94069728-29.5154726 14.11046717-6.08432987 81.68536494 20.71261235 81.68536494 20.71261235 60.97275259-32.75181827 66.2803595-16.6995437 66.2803595-16.6995437-38.83614815 9.32067555-133.85525728 93.07730173-146.54173235 104.46923851 62.91456 85.05116445 146.54173235 96.44310124 146.54173235 96.44310124 89.71150222-8.02613728 107.05831506-73.01195852 109.1295763-77.02502716-108.48230717 2.07126124-170.74959803-49.45136197-174.11539754-55.40623803z" fill="#FCB316" p-id="5957"></path></svg>`;
    } else if (is_huya) {
      logo = `<svg t="1694231489964" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4471" width="40" height="40"><path d="M516.032 156.352a425.408 425.408 0 0 1 162.624 22.4 388.096 388.096 0 0 1 124.224 69.632 300.16 300.16 0 0 1 78.336 99.904c12.032 25.28 20.096 52.544 23.424 80.384 2.496 21.184 2.496 43.136-4.352 63.552a104.128 104.128 0 0 1-36.928 50.816c-22.4 16.896-49.28 26.496-76.16 33.408-45.568 11.328-92.416 15.552-139.072 19.392-49.664 3.776-99.392 6.976-148.992 11.52-33.472 2.752-66.944 5.888-100.544 7.296a554.24 554.24 0 0 1-90.432-2.112c-26.304-3.328-52.928-9.728-75.584-24.064a102.592 102.592 0 0 1-39.168-45.056c-11.136-24.704-13.504-52.352-12.416-79.168 1.728-58.496 22.848-115.84 57.728-162.624 42.048-56.896 102.336-99.008 168.576-122.944a394.816 394.816 0 0 1 108.736-22.336z m-32.576 101.312a24.32 24.32 0 0 0-13.888 6.272 51.072 51.072 0 0 0-10.624 18.56 217.344 217.344 0 0 0-10.24 53.12c-2.432 30.592-1.664 61.44 2.496 91.84 2.752 18.816 6.592 37.76 14.592 55.168 3.968 8.064 9.088 16.512 17.6 20.288 8.768 3.328 18.368 1.92 27.264 0.064 19.072-4.352 37.056-12.48 54.4-21.44a447.36 447.36 0 0 0 65.92-42.304c16.448-12.992 32.576-26.88 45.056-43.904 5.632-8.192 11.648-18.304 8.384-28.608-4.16-11.584-13.312-20.544-22.144-28.8a336.704 336.704 0 0 0-55.232-38.912 399.808 399.808 0 0 0-73.152-33.536c-16.192-5.056-33.216-9.92-50.432-7.808m212.544 473.28c19.2-7.424 37.952-16.64 54.016-29.632 0.768 26.112-5.568 52.224-16.384 75.904l-1.024-1.024c-7.936-8.384-16.896-15.872-23.68-25.344a189.312 189.312 0 0 1-12.928-19.904m-285.248 46.912c-1.216-10.624-3.584-21.568-0.96-32.128 20.032 6.144 40.768 9.728 61.632 11.712-12.544 21.952-32.192 38.976-53.632 51.968a208.96 208.96 0 0 0-1.664-2.176c-0.576-9.984-4.224-19.456-5.376-29.376" fill="#F6F8F9" p-id="4472"></path><path d="M553.664 65.984c22.784-23.488 51.072-42.752 83.136-50.56 5.76-1.6 11.328 1.6 16.832 2.944 42.176 14.272 79.68 39.744 112.256 69.632a486.848 486.848 0 0 1 85.824 107.52c1.536 2.496 3.136 5.056 4.288 7.808-31.616-34.688-62.4-70.4-98.496-100.608a399.36 399.36 0 0 0-99.008-60.16c-4.288-1.6-8.192-4.544-12.864-4.8-32.192 2.88-62.976 14.272-91.968 28.224M194.176 22.72c59.648 7.168 118.912 22.656 171.904 51.456 3.84 2.24 8 4.096 11.584 6.848-8.384-1.92-16.384-5.376-24.64-7.68C308.928 60.16 262.976 50.944 216.768 52.416c-3.584 0.256-7.872-0.32-10.432 2.88-14.08 14.208-24.256 31.616-33.728 49.088a802.56 802.56 0 0 0-49.664 119.488c-3.712 10.752-6.464 21.76-9.984 32.576 6.144-74.432 31.36-146.496 67.712-211.392 4.288-7.616 8.64-15.104 13.504-22.336M406.464 151.68c99.456-33.792 210.944-27.776 307.584 12.672 39.936 16.768 77.44 39.488 110.144 67.968a323.328 323.328 0 0 1 81.408 106.944c10.944 23.552 18.88 48.576 23.104 74.176 5.696 33.408 5.056 69.12-9.344 100.416-2.24 4.736-4.352 9.6-7.872 13.568-2.368 6.08-7.04 10.88-11.008 15.936-24.128 28.288-59.136 44.544-94.208 54.72-50.56 14.4-103.232 18.944-155.456 23.36-36.48 2.816-73.024 5.184-109.44 8.128-63.168 4.928-126.272 12.352-189.696 11.52a384.896 384.896 0 0 1-77.056-8.384 177.28 177.28 0 0 1-56.192-22.528 127.552 127.552 0 0 1-45.44-49.984c-13.76-26.752-18.304-57.28-18.048-87.104 0.192-63.616 20.992-126.72 57.408-178.816 46.72-67.136 116.864-116.608 194.112-142.592z m109.568 4.672a394.816 394.816 0 0 0-108.736 22.336c-66.24 23.936-126.592 66.048-168.576 122.944a288.896 288.896 0 0 0-57.728 162.624c-1.088 26.816 1.28 54.464 12.48 79.232 8.192 18.432 21.952 34.304 39.104 44.992 22.656 14.336 49.28 20.672 75.584 24 30.016 3.52 60.352 3.584 90.432 2.112 33.6-1.344 67.072-4.48 100.544-7.232 49.6-4.608 99.264-7.744 148.928-11.52 46.656-3.84 93.568-8.064 139.072-19.392 26.88-6.912 53.76-16.512 76.16-33.408 17.024-12.736 30.4-30.528 36.928-50.816 6.912-20.416 6.912-42.368 4.352-63.552a261.504 261.504 0 0 0-23.424-80.384 300.992 300.992 0 0 0-78.336-99.904 388.096 388.096 0 0 0-124.224-69.632 426.176 426.176 0 0 0-162.56-22.4" fill="#954607" p-id="4473"></path><path d="M483.456 257.664c17.152-2.048 34.176 2.752 50.432 7.808 25.536 8.448 49.856 20.16 73.152 33.536 19.52 11.328 38.4 23.936 55.232 38.976 8.832 8.256 17.92 17.152 22.144 28.8 3.264 10.304-2.752 20.416-8.384 28.608-12.416 17.024-28.544 30.912-45.056 43.904a447.36 447.36 0 0 1-65.92 42.304 238.272 238.272 0 0 1-54.4 21.44c-8.896 1.792-18.496 3.2-27.2-0.192-8.512-3.776-13.632-12.224-17.6-20.288-8-17.344-11.84-36.352-14.592-55.104a428.608 428.608 0 0 1-2.496-91.904c1.6-17.984 4.096-36.032 10.24-53.12a49.536 49.536 0 0 1 10.624-18.496 24.128 24.128 0 0 1 13.824-6.272m430.016 270.272c1.344-0.96 2.56-2.624 4.416-2.56a404.8 404.8 0 0 1 104.256 9.472c0.768 5.376 0.96 10.88 1.344 16.32a374.4 374.4 0 0 1-5.056 79.36A549.888 549.888 0 0 0 945.92 553.6c-10.56-8.896-20.8-18.304-32.448-25.664M40.576 611.2a415.36 415.36 0 0 1 138.752-37.76 185.792 185.792 0 0 1-9.152 9.664 527.04 527.04 0 0 0-109.824 168.448 327.232 327.232 0 0 1-52.544-121.92c10.496-6.912 21.504-12.992 32.768-18.432m794.944 40.32c25.408 1.472 50.56 7.424 73.984 17.28 27.136 11.264 51.776 27.84 73.984 46.912 1.984 1.856 4.608 3.584 5.12 6.528a328 328 0 0 1-82.432 102.912c-4.928-25.6-10.24-51.264-18.432-76.096-11.584-35.136-26.944-70.016-52.224-97.536m-87.936 10.112a12.992 12.992 0 0 1 19.712 5.376c3.008 8.576-1.664 17.408-6.72 24.128 3.968 34.112-5.76 68.096-19.584 98.944a158.144 158.144 0 0 1-65.408-31.232c-6.272-4.608-11.456-10.496-17.152-15.68a575.552 575.552 0 0 1-174.4 15.488c-15.168 28.544-40.832 50.048-68.8 65.408a206.08 206.08 0 0 1-45.504-96.576c-6.08-4.864-12.416-10.24-15.232-17.728-1.024-5.312 3.52-10.112 8.32-11.712 4.864-2.048 11.776-3.072 15.36 1.792 6.464 8.192 16.32 12.48 25.728 16.384 29.568 11.456 61.44 15.488 92.928 17.152A549.184 549.184 0 0 0 640 720.768c27.712-6.464 55.296-15.104 79.872-29.696 8-4.928 16.192-10.176 21.696-17.92 1.536-3.968 1.984-8.96 6.016-11.52z m-51.584 69.312c-8.32 3.2-16.896 5.696-25.28 8.64 17.28 16.896 38.464 30.336 61.952 36.608l1.024 1.024c10.816-23.68 17.152-49.792 16.384-75.904a200.512 200.512 0 0 1-54.08 29.632z m-313.472 4.032c6.336 25.984 17.024 51.264 33.664 72.32l1.664 2.176c21.44-12.992 41.152-30.016 53.632-51.968a314.688 314.688 0 0 1-61.632-11.712 186.688 186.688 0 0 1-27.328-10.816m-202.176 4.544a240.384 240.384 0 0 1 109.248-55.36 222.72 222.72 0 0 0-24.128 50.24c-17.088 50.688-21.632 104.64-21.632 157.824a449.728 449.728 0 0 1-125.888-76.864 288 288 0 0 1 62.4-75.84" fill="#954607" p-id="4474"></path><path d="M553.664 65.984c28.928-13.952 59.776-25.344 92.032-28.096 4.608 0.32 8.576 3.264 12.864 4.8a396.288 396.288 0 0 1 99.008 60.16c36.096 30.208 66.88 65.92 98.496 100.608 10.048 10.56 20.864 20.352 30.528 31.232 68.416 74.304 117.248 168.064 132.416 268.416 2.176 15.936 4.224 32 4.48 48.064-0.384-5.44-0.64-10.88-1.344-16.32a405.056 405.056 0 0 0-104.256-9.472c-1.856-0.064-3.072 1.6-4.416 2.56 11.648 7.36 21.888 16.768 32.448 25.6 26.752 23.104 50.688 49.216 72.512 76.928a324.672 324.672 0 0 1-29.824 91.776c-0.512-2.944-3.136-4.608-5.12-6.528a277.184 277.184 0 0 0-73.984-46.912 225.28 225.28 0 0 0-73.984-17.28c25.28 27.52 40.64 62.4 52.224 97.536 8.192 24.832 13.568 50.432 18.432 76.096l0.064 0.192c-49.408 41.472-108.736 69.824-170.304 88.128-80.704 23.936-165.504 31.616-249.408 28.928-82.88-3.072-165.952-18.112-242.752-49.856v-0.256c0-53.184 4.608-107.136 21.632-157.824 5.888-17.664 14.08-34.56 24.128-50.24a240.384 240.384 0 0 0-109.248 55.36 288.832 288.832 0 0 0-62.464 75.904 358.912 358.912 0 0 1-57.536-63.872 524.928 524.928 0 0 1 109.824-168.448c3.2-3.136 6.336-6.272 9.152-9.728a413.888 413.888 0 0 0-138.688 37.76c-11.264 5.44-22.272 11.52-32.768 18.432a404.48 404.48 0 0 1 4.736-176.896 491.392 491.392 0 0 1 100.416-196.288c3.52-10.816 6.272-21.824 9.984-32.576 13.696-40.896 29.568-81.216 49.664-119.488 9.472-17.472 19.648-34.944 33.728-49.088 2.496-3.2 6.784-2.624 10.432-2.88 46.208-1.472 92.16 7.744 136.256 20.928 8.32 2.304 16.256 5.696 24.64 7.68 1.664 0.512 3.328 1.6 5.12 0.832a494.336 494.336 0 0 1 167.488-15.552l3.392-0.32z m-147.2 85.696c-77.248 25.984-147.392 75.456-194.112 142.592a316.288 316.288 0 0 0-57.408 178.816c-0.256 29.824 4.288 60.352 18.048 87.104a128 128 0 0 0 45.44 49.984c17.024 11.072 36.48 17.856 56.192 22.528 25.216 5.824 51.2 7.744 77.056 8.384 63.424 0.832 126.592-6.592 189.696-11.52 36.48-2.944 72.96-5.312 109.44-8.128 52.224-4.416 104.896-8.896 155.456-23.36 35.072-10.176 70.08-26.432 94.208-54.72 3.968-5.056 8.64-9.856 11.008-15.936 3.52-3.968 5.632-8.832 7.872-13.568 14.336-31.232 14.976-67.008 9.344-100.416a286.976 286.976 0 0 0-23.104-74.176 323.328 323.328 0 0 0-81.408-106.944 408.256 408.256 0 0 0-110.144-67.968c-96.64-40.448-208.128-46.528-307.584-12.672z m341.12 509.952c-4.032 2.56-4.48 7.552-6.144 11.584-5.504 7.744-13.76 12.992-21.696 17.92-24.576 14.592-52.16 23.232-79.872 29.696a543.488 543.488 0 0 1-143.168 12.608c-31.488-1.6-63.36-5.696-92.928-17.152-9.408-3.904-19.264-8.192-25.728-16.384-3.584-4.864-10.496-3.84-15.36-1.792-4.8 1.6-9.28 6.4-8.32 11.712 2.88 7.488 9.152 12.8 15.232 17.728 6.528 35.392 21.952 69.248 45.504 96.576 28.032-15.36 53.632-36.864 68.8-65.408a577.408 577.408 0 0 0 174.4-15.488c5.696 5.248 10.816 11.072 17.152 15.68 18.944 15.424 41.6 25.92 65.408 31.232 13.888-30.848 23.616-64.832 19.584-98.944 5.056-6.72 9.792-15.616 6.72-24.128-2.752-7.68-13.248-10.56-19.584-5.44" fill="#F49F17" p-id="4475"></path><path d="M670.72 739.648c8.384-2.944 16.96-5.44 25.28-8.64 4.032 6.784 8.064 13.632 12.992 19.904 6.72 9.472 15.68 16.96 23.68 25.344a143.232 143.232 0 0 1-61.952-36.608z m-288.192-4.672c8.768 4.352 17.984 7.872 27.328 10.752-2.688 10.56-0.256 21.504 0.96 32.128 1.088 9.984 4.8 19.456 5.44 29.44a186.56 186.56 0 0 1-33.728-72.32z" fill="#F3EBDE" p-id="4476"></path></svg>`;
    } else if (is_douyin) {
      logo = `<svg t="1694230416862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4262" width="40" height="40"><path d="M230.4 51.2h563.2C892.416 51.2 972.8 131.584 972.8 230.4v563.2C972.8 892.416 892.416 972.8 793.6 972.8h-563.2C131.584 972.8 51.2 892.416 51.2 793.6v-563.2C51.2 131.584 131.584 51.2 230.4 51.2z" fill="#170B1A" p-id="4263"></path><path d="M511.488 323.072c0.512-57.856 0-115.712 0.512-173.568h118.272c-0.512 10.24 1.024 20.48 2.56 30.208h-87.04v470.016c0.512 19.968-4.608 39.936-14.336 57.344-15.36 26.624-44.032 45.056-74.752 47.616-19.456 1.536-39.424-2.048-56.832-11.776a97.570133 97.570133 0 0 1-33.28-29.696c30.208 16.896 69.632 15.36 98.816-3.584 28.16-17.408 46.592-50.176 46.592-83.968-0.512-100.864-0.512-201.728-0.512-302.592z m195.072-33.28c16.384 10.24 34.816 18.432 53.76 22.528 11.264 2.56 22.528 3.584 34.304 3.584v26.624c-33.792-7.68-65.024-26.624-88.064-52.736z" fill="#25F4EE" p-id="4264"></path><path d="M298.496 437.248c42.496-26.624 94.208-37.376 143.36-30.208v28.16c-13.312 0.512-26.112 2.048-39.424 4.608-31.744 6.656-61.952 19.968-88.064 39.424-28.16 20.992-49.664 49.664-64.512 81.408-14.336 30.208-21.504 63.488-20.992 97.28 0 36.864 10.24 72.704 27.648 104.96 8.192 14.848 17.408 29.184 29.696 40.96-25.088-17.408-46.08-40.96-61.44-67.584-20.992-35.328-31.232-76.8-30.208-118.272 1.536-37.888 12.288-75.264 32.256-108.032 17.408-29.184 42.496-54.784 71.68-72.704z" fill="#25F4EE" p-id="4265"></path><path d="M545.792 179.712h87.552c3.072 16.896 9.216 32.768 16.896 48.128 12.288 23.552 29.696 44.544 52.224 58.368a11.946667 11.946667 0 0 1 3.584 3.584 168.0384 168.0384 0 0 0 88.576 52.736c0.512 30.72 0 61.952 0 92.672a277.333333 277.333333 0 0 1-162.816-51.712c0 73.728 0 147.456 0.512 221.184 0 9.728 0.512 19.456 0 29.696-2.56 35.84-13.824 71.168-31.744 102.4-15.36 27.136-36.352 51.2-61.44 69.632-32.256 24.064-72.192 37.376-112.128 38.4-20.48 0.512-40.96-0.512-60.928-5.12-28.16-6.144-54.784-17.92-78.336-34.304l-1.536-1.536c-11.776-11.776-21.504-26.112-29.696-40.96-17.408-31.744-27.648-68.096-27.648-104.96-0.512-33.28 6.656-67.072 20.992-97.28 14.848-31.744 36.864-60.416 64.512-81.408 26.112-19.456 56.32-32.768 88.064-39.424 12.8-2.56 26.112-4.096 39.424-4.608 0.512 11.776 0 23.552 0.512 34.816v59.904c-14.848-5.12-31.232-5.12-46.592-1.536-18.432 4.096-35.84 12.288-50.176 24.576-8.704 7.68-16.384 16.896-21.504 27.136-9.216 17.408-12.288 37.888-10.24 57.344 2.048 18.944 10.24 37.376 22.528 51.712 8.192 10.24 18.944 17.92 29.696 25.088 8.704 12.288 19.968 22.528 33.28 29.696 17.408 9.216 37.376 13.312 56.832 11.776 30.72-2.048 59.392-20.992 74.752-47.616 9.728-17.408 14.848-37.376 14.336-57.344 1.024-157.696 0.512-314.368 0.512-471.04z" fill="#FFFFFF" p-id="4266"></path><path d="M633.344 179.712c10.24 0.512 20.48 0 31.232 0 0 34.304 10.752 68.608 30.72 96.768 2.56 3.584 5.12 6.656 7.68 9.728-22.528-13.824-40.448-34.816-52.224-58.368-7.68-14.848-13.824-31.232-17.408-48.128z m161.28 162.816c11.264 2.56 22.528 3.584 34.304 3.584v119.296c-58.368 0.512-116.736-18.944-164.352-53.248v236.544c0.512 17.92-1.024 35.84-5.12 53.248-11.264 53.248-43.008 101.376-87.04 132.608-23.552 16.896-50.176 28.672-77.824 34.816-33.792 7.68-69.12 7.168-102.4-1.536-39.424-10.24-76.288-32.256-103.936-62.464 23.552 16.896 50.176 28.16 78.336 34.304 19.968 4.608 40.448 5.632 60.928 5.12 39.936-1.024 79.872-14.336 112.128-38.4 25.088-18.432 45.568-42.496 61.44-69.632 17.92-31.232 29.184-66.56 31.744-102.4 0.512-9.728 0.512-19.456 0-29.696-0.512-73.728-0.512-147.456-0.512-221.184a277.333333 277.333333 0 0 0 162.816 51.712c-0.512-30.72 0-61.952-0.512-92.672z" fill="#FE2C55" p-id="4267"></path><path d="M442.368 434.688c11.264 0 23.04 0.512 34.304 2.048v122.368c-16.384-5.632-34.816-6.144-51.712-2.048-32.256 7.168-59.392 31.744-70.656 62.976-11.264 30.72-6.656 66.56 12.8 92.672-11.264-6.656-21.504-14.848-29.696-25.088-12.288-14.336-20.48-32.768-22.528-51.712-2.048-19.456 1.024-39.936 10.24-57.344 5.12-10.24 12.8-19.456 21.504-27.136 14.336-12.288 32.256-19.968 50.176-24.576 15.36-3.584 31.744-3.584 46.592 1.536v-59.904c-1.024-10.24-0.512-22.016-1.024-33.792z" fill="#FE2C55" p-id="4268"></path></svg>`;
    } else if (is_bilibili) {
      logo = `<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2753" width="24" height="24"><path d="M306.005333 117.632L444.330667 256h135.296l138.368-138.325333a42.666667 42.666667 0 0 1 60.373333 60.373333L700.330667 256H789.333333A149.333333 149.333333 0 0 1 938.666667 405.333333v341.333334a149.333333 149.333333 0 0 1-149.333334 149.333333h-554.666666A149.333333 149.333333 0 0 1 85.333333 746.666667v-341.333334A149.333333 149.333333 0 0 1 234.666667 256h88.96L245.632 177.962667a42.666667 42.666667 0 0 1 60.373333-60.373334zM789.333333 341.333333h-554.666666a64 64 0 0 0-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0 0 57.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0 0 63.701334-57.856L853.333333 746.666667v-341.333334A64 64 0 0 0 789.333333 341.333333zM341.333333 469.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v85.333333a42.666667 42.666667 0 0 1-85.333333 0v-85.333333a42.666667 42.666667 0 0 1 42.666666-42.666667z m341.333334 0a42.666667 42.666667 0 0 1 42.666666 42.666667v85.333333a42.666667 42.666667 0 0 1-85.333333 0v-85.333333a42.666667 42.666667 0 0 1 42.666667-42.666667z" p-id="2754" fill="currentColor"></path></svg>`;
    }
    return logo;
  };
  const htmlTemplate = (isShowBg, isShowMenu, isShowFullScreen, isShowGift, isShowLogo, isMaxPro = true) => {
    return `<div class="m-container">
    <div class="m-container-box" id="m-container-box2">
        <div class="operation">
            ${support.supportSearch() ? `<input type="text" placeholder="房间号或者名称...">` : ``}
            ${support.supportAdd() ? `<button class="btn btn-primary add-room" title="复制地址栏房间号，手动添加房间,也可以通过点击房间名称添加">添加</button>` : ``}
            ${support.supportReset() ? `<button class="btn btn-success clear-room" title="重置表格数据">重置</button>` : ``}
            ${support.supportBg() ? `<button class="btn btn-warning bg-btn" title="上传背景图">背景</button>` : ``}
            ${support.supportBg() ? `<input type="file" id="file">` : ``}
            ${support.supportBg() ? `<input type="checkbox" id="checkbox1" ${isShowBg ? "checked" : ""} class="checkbox" title="是否显示背景" />背景` : ``}
            ${support.supportMenu() ? `<input type="checkbox" id="checkbox2" ${isShowMenu ? "checked" : ""} class="checkbox" title="是否显示左侧菜单"/>菜单 ` : ``}
            ${` <input type="checkbox" id="checkbox3" ${isShowFullScreen ? "checked" : ""} class="checkbox" title="自动全屏"/>全屏`}
            ${support.supportGift() ? `<input type="checkbox" id="checkbox4" ${isShowGift ? "checked" : ""} class="checkbox" title="显示礼物栏"/>礼物` : ``}
            <input type="checkbox" id="checkbox5" ${isShowLogo ? "checked" : ""} class="checkbox" title="关闭或者显示插件Logo"/>logo
            ${`<input type="checkbox" id="checkbox6" ${isMaxPro ? "checked" : ""} class="checkbox" title="自动最高画质"/>画质`}
            <a class="m-link" href="https://greasyfork.org/zh-CN/scripts/449261-%E8%99%8E%E7%89%99%E7%9B%B4%E6%92%AD" target="_blank" title="更新、反馈">更新</a>
            <button class="btn btn-info btn-close-container" title="关闭" >关闭</button>
        </div>
        <table ${support.supportTable() ? "" : 'style="display:none !important;"'}>
            <thead>
                <th>序号</th>
                <th>名称</th>
                <th>房间号</th>
                <th>操作</th>
            </thead>
            <tbody>
            </tbody>
        </table>
        </div>
 </div>`;
  };
  class LivePlugin {
    constructor() {
      this.baseUrl = "/";
      this.key = "key";
      this.bg_key = "bg_key";
      this.bg_show_key = "bg_show_key";
      this.bg_is_first_key = "bg_is_first_key";
      this.full_screen_key = "full_screen_key";
      this.full_screen_class_or_id = "full_screen_button_class_or_id";
      this.full_button_tag_name = "div";
      this.full_screen_button = getLocalStore(this.full_screen_class_or_id, String.name, false) || this.full_screen_class_or_id;
      this.full_screen_text = "全屏";
      this.full_cancel_text = "退出全屏";
      this.full_screen_is_first_key = "full_screen_is_first_key";
      this.default_background_image = "https://cdn.staticaly.com/gh/wuxin0011/blog-resource@main/picgo/bg5.jpg";
      this.users = [];
      this.menu = null;
      this.menu_show_key = "menu_show_key";
      this.menu_is_first_key = "menu_is_first_key";
      this.tbody = null;
      this.m_container = null;
      this.gift_key = `${this.key}_gift`;
      this.gift_tool = null;
      this.gift_is_first_key = "gift_is_first_key";
      this.logo_btn = null;
      this.btn_logo_svg = iconLogo();
      this.logo_show_key = `${this.key}_logo_show`;
      this.header_logo = "none";
      this.button_name = "";
      this.is_new = false;
      this.btn_is_first_key = "btn_is_first_key";
      this.video_player_container = ".room-player-wrap";
      this.auto_max_pro_key = "auto_max_pro_key";
      this.is_first_auto_max_pro_key = "is_first_auto_max_pro_key";
      this.auto_max_pro_class_or_id_list = "auto_max_pro_class_or_id_list";
      this.auto_max_pro_keywords = ["登录", "会员", "大会员"];
      if (is_localhost) {
        this.init();
      }
    }
    // 初始化操作方法，子类可以继承该类，实现该类中空方法，参考此操作,初始化构造器实调用该方法就可以了。。。
    init() {
      if (!this.removeRoom()) {
        this.common();
        this.detail();
        this.index();
        this.category();
        this.create_container();
        this.isShowLeftMenu();
        this.isShowGift();
        this.clickLogoShowContainer();
      }
      this.settingBackgroundImage();
    }
    /*********************************建议下面操作方法必须重写的,并且参考此步骤*****************************/
    /**
     * 公共
     */
    common() {
    }
    /**
     * 首页
     */
    index() {
    }
    /**
     * 分类
     */
    category() {
    }
    /**
     * 详情
     */
    detail() {
    }
    /**
     * 点击房间名称操作
     */
    removeRoomByClickRoomName() {
    }
    /**
     * 通过房间号获取名称
     * @param roomId 房间号
     * @returns {null} name
     */
    getNameByRoomId(roomId) {
      warn("请自定义实现通过名称获取房间号方法");
      return null;
    }
    /**
     * 通过一个地址获取房间号
     * @param url 地址
     * @returns {null} 房间号
     */
    getRoomIdByUrl(url) {
      warn("请自定义实现通过名称获取房间号方法");
      return null;
    }
    /**
     * 自动最高画质！
     */
    isAutoMaxVideoPro() {
      let that = this;
      if (!(wls.getItem(that.is_first_auto_max_pro_key) === null ? true : getLocalStore(that.auto_max_pro_key, Boolean.name))) {
        return;
      }
      log("查找播放视频画质列表", that.auto_max_pro_class_or_id_list);
      loopDo((timer) => {
        let items = querySelectorAll(that.auto_max_pro_class_or_id_list);
        if (isArray(items)) {
          for (let item of items) {
            let result = that.auto_max_pro_keywords.findIndex((key) => item.innerText.indexOf(key) !== -1);
            if (result === -1) {
              log("当前最高画质", item.innerText);
              if (is_huya) {
                item = querySelector(item, "span");
              }
              item.click();
              clearInterval(timer);
              return;
            }
          }
        }
      }, 100, 500);
    }
    /*********************************子类继承无需修改的方法******************************/
    /**
     * 容器，所有操作容器均在此容器中，
     */
    create_container() {
      let that = this;
      let body = querySelector("body") ?? createElement("body");
      that.users = getLocalStore(that.key, Array.name) || [];
      let isShowBg = wls.getItem(this.btn_is_first_key) === null ? true : getLocalStore(that.bg_show_key, Boolean.name);
      let isShowMenu = wls.getItem(this.menu_is_first_key) === null ? false : getLocalStore(that.menu_show_key, Boolean.name);
      let isShowFullScreen = wls.getItem(this.full_screen_is_first_key) === null ? false : getLocalStore(that.full_screen_key, Boolean.name);
      let isShowGift = wls.getItem(this.gift_is_first_key) === null ? false : getLocalStore(that.gift_key, Boolean.name);
      let isShowLogo = wls.getItem(this.btn_is_first_key) === null ? true : getLocalStore(that.logo_show_key, Boolean.name);
      let isAutoMaxPro = wls.getItem(this.is_first_auto_max_pro_key) === null ? true : getLocalStore(that.auto_max_pro_key, Boolean.name);
      that.m_container = s2d(htmlTemplate(isShowBg, isShowMenu, isShowFullScreen, isShowGift, isShowLogo, isAutoMaxPro));
      appendChild(body, that.m_container);
      if (querySelector(that.m_container, "#m-container-box2 table tbody")) {
        that.tbody = querySelector(that.m_container, "#m-container-box2 table tbody");
        this.is_new = true;
      } else {
        that.tbody = querySelector(that.m_container, ".m-container table tbody");
        this.is_new = false;
      }
      that.operationDOMButton();
      that.createRoomItem(that.users);
      that.createButton();
      log("操作面板初始化完毕！");
    }
    /**
     * 通过用户列表构建列表
     * @param {Object} arr  用户列表
     */
    createRoomItem(arr) {
      if (!isArray(arr)) {
        return;
      }
      let that = this;
      arr.forEach((item, index) => {
        let tr = createElement("tr");
        tr.innerHTML = `
                <td>${index + 1}</td>
                <td>${item.name}</td>
                <td>${item.roomId}</td>
                <td><button class="btn btn-danger" room-id="${item.roomId}">删除</button></td>
                `;
        appendChild(that.tbody, tr);
        addEventListener(querySelector(tr, "button"), "click", function(e) {
          let roomId = e.target.getAttribute("room-id");
          that.userDelete(roomId);
          handlerPromise(that.getRoomIdByUrl(local_url), (result) => {
            if (result === roomId) {
              window.location.reload();
            }
          });
          removeDOM(tr, true);
        });
      });
    }
    /**
     * 绘制表格
     * @param {Object} arr 表格数据
     */
    resetTbody(arr) {
      if (!this.tbody) {
        error("tbody 为 null ！");
        return;
      }
      querySelectorAll(this.tbody, "tr").forEach((item) => removeDOM(item, true));
      this.createRoomItem(arr);
    }
    /**
     * 操作框容器
     */
    operationDOMButton() {
      let that = this;
      if (!that.m_container) {
        return;
      }
      const container = that.m_container;
      const inputValue = querySelector(container, ".operation input");
      addEventListener(inputValue, "input", () => {
        let arr = that.users.filter((item) => item && item.roomId && item.roomId.indexOf(inputValue.value) !== -1 || item.name && item.name.indexOf(inputValue.value) !== -1);
        that.resetTbody(arr);
      });
      const addRoomBtn = querySelector(container, ".operation button.add-room");
      addEventListener(addRoomBtn, "click", function() {
        const keywords = inputValue.value.trim();
        if (!keywords) {
          return alert("请输入房间号！");
        }
        if (!that.userIsExist(keywords)) {
          handlerPromise(that.getNameByRoomId(keywords), (res) => {
            that.searchUserByRoomId(res, keywords, inputValue);
          });
        } else {
          alert("该主播已添加！");
        }
      });
      const clearRoomBtn = querySelector(container, ".operation button.clear-room");
      addEventListener(clearRoomBtn, "click", function() {
        if (confirm("确认重置？")) {
          that.users = [];
          let deleteKeyList = [
            that.key,
            that.bg_key,
            that.menu_show_key,
            that.gift_key,
            that.logo_show_key,
            that.full_screen_key,
            that.bg_is_first_key,
            that.btn_is_first_key,
            that.full_screen_is_first_key,
            that.menu_is_first_key,
            that.gift_is_first_key,
            that.is_first_auto_max_pro_key
          ];
          for (let item of deleteKeyList) {
            wls.removeItem(item);
          }
          that.resetTbody(that.users);
          window.location.reload();
        }
      });
      const uploadButton = querySelector(container, ".operation #file");
      addEventListener(uploadButton, "change", function(e) {
        const file = uploadButton.files[0] || null;
        uploadImage(file, (base64) => {
          addLocalStore(that.bg_key, base64, String.name, false);
          that.settingBackgroundImage(e.target.result);
        });
        addLocalStore(that.bg_is_first_key, false, Boolean.name);
      });
      const upload = querySelector(container, ".operation .bg-btn");
      addEventListener(upload, "click", function(e) {
        uploadButton.click();
        addLocalStore(that.bg_is_first_key, false, Boolean.name);
      });
      const close_container = querySelector(container, ".operation .btn-close-container");
      addEventListener(close_container, "click", function(e) {
        that.isShowContainer();
      });
      const close_container2 = querySelector(container, ".operation #m-close-button1");
      addEventListener(close_container2, "click", function(e) {
        that.isShowContainer();
      });
      const checkbox = querySelector(container, ".operation #checkbox1");
      addEventListener(checkbox, "change", function(e) {
        that.settingBackgroundImage();
        addLocalStore(that.bg_show_key, e.target.checked, Boolean.name);
        addLocalStore(that.bg_is_first_key, false, Boolean.name);
      });
      const menu = querySelector(container, ".operation #checkbox2");
      addEventListener(menu, "change", function(e) {
        that.getLeftMenu(e.target.checked);
        addLocalStore(that.menu_is_first_key, false, Boolean.name);
      });
      const full_screen_btn = querySelector(container, ".operation #checkbox3");
      addEventListener(full_screen_btn, "change", function(e) {
        addLocalStore(that.full_screen_key, e.target.checked, Boolean.name);
        that.isFullScreen(true);
        addLocalStore(that.full_screen_is_first_key, false, Boolean.name);
      });
      const show_gift = querySelector(container, ".operation #checkbox4");
      addEventListener(show_gift, "change", function(e) {
        addLocalStore(that.gift_key, e.target.checked, Boolean.name);
        that.isShowGift();
        addLocalStore(that.gift_is_first_key, false, Boolean.name);
      });
      const show_logo_btn = querySelector(container, ".operation #checkbox5");
      addEventListener(show_logo_btn, "change", function(e) {
        e.preventDefault();
        if (!that.logo_btn) {
          warn("获取不到Logo哦！");
          return alert("获取不到logo");
        }
        if (that.logo_btn.style.display === "block") {
          if (confirm("确认隐藏Logo？隐藏之后不再显示哦!如需显示logo，点击直播头部Logo即可显示")) {
            that.logo_btn.style.display = "none";
            addLocalStore(that.logo_show_key, false, Boolean.name);
          }
        } else {
          that.logo_btn.style.display = "block";
          addLocalStore(that.logo_show_key, true, Boolean.name);
        }
        addLocalStore(that.btn_is_first_key, false, Boolean.name);
      });
      const auto_max_pro = querySelector(container, ".operation #checkbox6");
      addEventListener(auto_max_pro, "change", function(e) {
        addLocalStore(that.auto_max_pro_key, e.target.checked, Boolean.name);
        addLocalStore(that.is_first_auto_max_pro_key, false, Boolean.name);
        that.isAutoMaxVideoPro();
      });
      this.initAnimation(container);
      log("操作按钮添加成功！");
    }
    initAnimation(container) {
      let box1 = querySelector(container, "#m-container-box1");
      let box2 = querySelector(container, "#m-container-box2");
      let change1 = querySelector(container, "#m-change-box1");
      let change2 = querySelector(container, "#m-change-box2");
      let select1 = querySelector(container, ".m-type-item-left .m-select-option-container #m-select-input-address");
      let select2 = querySelector(".m-type-item-left .m-select-input-container #m-select-input-select");
      let select1_box1 = querySelector(container, ".m-type-item-left #m-select-option");
      let select2_box2 = querySelector(container, ".m-type-item-left #m-select-input");
      addEventListener(change1, "click", () => {
        if (box1 && box2) {
          box1.classList.add("m-ani-left-is-close");
          box1.classList.remove("m-ani-left-is-active");
          box2.classList.add("m-ani-right-is-active");
          box2.classList.remove("m-ani-right-is-close");
        }
      });
      addEventListener(change2, "click", () => {
        if (box1 && box2) {
          box1.classList.add("m-ani-left-is-active");
          box1.classList.remove("m-ani-left-is-close");
          box2.classList.add("m-ani-right-is-close");
          box2.classList.remove("m-ani-right-is-active");
        }
      });
      addEventListener(select1, "click", () => {
        if (select1_box1 && select2_box2) {
          select1_box1.classList.remove("m-ani-left-is-active");
          select1_box1.classList.add("m-ani-left-is-close");
          select2_box2.classList.remove("m-ani-right-is-close");
          select2_box2.classList.add("m-ani-right-is-active");
        }
      });
      addEventListener(select2, "click", () => {
        if (select1_box1 && select2_box2) {
          select1_box1.classList.add("m-ani-left-is-active");
          select1_box1.classList.remove("m-ani-left-is-close");
          select2_box2.classList.add("m-ani-right-is-close");
          select2_box2.classList.remove("m-ani-right-is-active");
        }
      });
      log("动画初始化完毕！");
    }
    searchUserByRoomId(name, roomId, inputValue) {
      let that = this;
      if (name) {
        that.addUser(roomId, name);
        inputValue.value = "";
      } else {
        if (confirm(`房间号为${roomId}的主播不存在！确定添加？`)) {
          that.addUser(roomId, roomId);
          inputValue.value = "";
        }
      }
    }
    /**
     * 右侧操作按钮
     * @param text 指定按钮文本，默认是小虎牙或者是小鱼丸
     */
    createButton() {
      let that = this;
      let body = querySelector("body");
      if (!body) {
        error("获取不到 body ");
        return;
      }
      if (!!that.logo_btn) {
        warn("button已经添加了！不能重复添加！");
        return;
      }
      let text = this.button_name;
      const btn = createElement("button");
      btn.style.cursor = "pointer";
      btn.style.position = "fixed";
      btn.style.top = "300px";
      btn.style.right = "0px";
      btn.style.zIndex = 999999999999;
      let backgroundColor = "";
      if (that.btn_logo_svg !== "none") {
        btn.innerHTML = that.btn_logo_svg;
        btn.style.backgroundColor = "transparent";
      } else {
        backgroundColor = is_bilibili ? "255,102,102" : "255, 93, 35";
        btn.style.padding = "5px 10px";
        btn.style.backgroundColor = `rgb(${backgroundColor})`;
        btn.style.borderRadius = "20px";
        btn.style.fontSize = "12px";
        btn.style.color = "#fff";
        btn.textContent = text ? text : is_huya ? "小虎牙" : is_douyu ? "小鱼丸" : is_bilibili ? "小B" : "默认";
      }
      btn.style.border = "none";
      btn.style.outline = "none";
      addEventListener(btn, "click", function() {
        that.isShowContainer();
      });
      addEventListener(btn, "mouseenter", function() {
        btn.style.backgroundColor = `rgba(${backgroundColor},0.6)`;
      });
      let flag = false;
      let x, y;
      const mouse_key = that.key + "_mouse_key";
      let { mouse_left, mouse_top } = getLocalStore(mouse_key, Object.name);
      log(`获到Logo位置信息 ${mouse_left}px, ${mouse_top}px`);
      if (!isNaN(Number(mouse_left)) && !isNaN(Number(mouse_top))) {
        btn.style.left = mouse_left + "px";
        btn.style.top = mouse_top + "px";
        btn.style.right = "auto";
      }
      addEventListener(btn, "mousedown", (event) => {
        x = event.offsetX;
        y = event.offsetY;
        log("mouseDown", x, y);
        flag = true;
        addEventListener(wd, "mousemove", move);
      });
      addEventListener(btn, "mouseup", () => {
        flag = false;
        wd.removeEventListener("mousemove", move);
        wd.onmousemove = null;
      });
      addEventListener(btn, "mouseleave", () => {
        flag = false;
        btn.style.backgroundColor = `rgba(${backgroundColor},1)`;
        wd.removeEventListener("mousemove", move);
        wd.onmousemove = null;
      });
      function move(e) {
        e.preventDefault();
        if (!flag) {
          return;
        }
        let btn_top = Math.min(Math.max(0, e.clientY - y), window.innerHeight - btn.offsetHeight);
        let btn_left = Math.min(Math.max(0, e.clientX - x), window.innerWidth - btn.offsetWidth);
        btn.style.left = `${btn_left}px`;
        btn.style.top = `${btn_top}px`;
        btn.style.right = "auto";
        addLocalStore(mouse_key, { "mouse_left": btn_left, "mouse_top": btn_top }, Object.name);
      }
      btn.style.display = wls.getItem(that.btn_is_first_key) == null || getLocalStore(that.logo_show_key, Boolean.name) ? "block" : "none";
      that.logo_btn = btn;
      appendChild(body, that.logo_btn);
      log("button 添加完毕！");
    }
    /**
     * 该房间是否已改被删除
     * @param url 房间链接地址 默认 window.location.href
     */
    removeRoom(url = local_url) {
      try {
        if (!this.isRemove(url)) {
          return false;
        }
        this.roomIsNeedRemove();
        return true;
      } catch (error2) {
        return false;
      }
    }
    /**
     * 房间已被删除之后操作
     * @param url 房间链接地址 默认 window.location.href
     */
    roomAlreadyRemove() {
      let that = this;
      removeDOM(querySelector("body"), true);
      const h2 = createElement("h3");
      let html = querySelector("html");
      let body = querySelector("body") ?? createElement("body");
      body.style.display = "flex";
      body.style.flexDirection = "column";
      body.style.justifyContent = "center";
      body.style.alignItems = "center";
      handlerPromise(this.getRoomIdByUrl(local_url), (roomId) => {
        let name = this.getUser(roomId) ? this.getUser(roomId).name : "";
        const a = createElement("a");
        a.textContent = "点击解锁";
        a.style.display = "block";
        a.style.cursor = "pointer";
        a.style.fontSize = "20px";
        a.onclick = (e) => {
          e.preventDefault();
          that.userDelete(roomId);
          window.location.reload();
        };
        h2.style.fontSize = "36px";
        h2.textContent = `主播【${name}】已被你屏蔽`;
        let title = querySelector("title");
        if (!title) {
          title = createElement("title");
        }
        title.textContent = `主播【${name}】已被你屏蔽`;
        html.appendChild(body);
        body.appendChild(h2);
        body.appendChild(a);
        let logo_show = getLocalStore(that.logo_show_key, Boolean.name);
        if (logo_show) {
          let logo = createElement("a");
          logo.textContent = "显示logo";
          logo.style.display = "block";
          logo.style.cursor = "pointer";
          logo.style.fontSize = "20px";
          logo.onclick = (e) => {
            e.preventDefault();
            logo.style.display = "none";
            addLocalStore(that.logo_show_key, false, Boolean.name);
            that.createButton();
          };
          body.appendChild(logo);
        }
        removeDOM(this.m_container, true);
        this.m_container = null;
        this.create_container();
      });
    }
    /**
     * 判断链接是否应该被删除
     * @param href 房间链接地址 默认 window.location.href
     */
    isRemove(href) {
      try {
        let res = this.getRoomIdByUrl(href);
        if (res instanceof Promise) {
          return false;
        }
        return this.userIsExist(res);
      } catch (error2) {
        return false;
      }
    }
    /**
     * 设置背景图
     * @param url 背景图地址 默认 是默认地址
     * @param container 修改背景容器 默认是body
     */
    settingBackgroundImage(url, container) {
      if (!support.supportBg()) {
        log("当前平台不支持背景");
        return;
      }
      container = querySelector("body");
      if (!container || !(container instanceof HTMLElement)) {
        warn("壁纸设置失败 获取不到 container ！");
        return;
      }
      if (getLocalStore(this.bg_show_key, Boolean.name) || wls.getItem(this.bg_is_first_key) == null) {
        url = !!url ? url : wls.getItem(this.bg_key) ? wls.getItem(this.bg_key) : this.default_background_image;
        container.style.backgroundSize = "cover";
        container.style.backgroundRepeat = "no-repeat ";
        container.style.backgroundAttachment = "fixed";
        container.style.backgroundImage = `url(${url})`;
        log("背景图添加完毕！");
      } else {
        container.style.backgroundImage = "none";
      }
    }
    /**
     * 通过房间名称或者id判断房间是否已经保存到本地
     * @param keywords 房间名或者id
     * @param list 本地缓存数据，默认是本地缓存用户数据
     */
    userIsExist(keywords, list = this.users) {
      return !!this.getUser(keywords, list);
    }
    /**
     * 通过房间名称或者id判断房间是否已经保存到本地
     * @param keywords 房间名或者id
     * @param list 本地缓存数据，默认是本地缓存用户数据
     */
    getUser(keywords, list = this.users) {
      if (!keywords) {
        return null;
      }
      for (let i = 0; i < list.length; i++) {
        if (list[i].name && list[i].name === keywords || list[i].roomId && list[i].roomId === keywords) {
          return list[i];
        }
      }
      return null;
    }
    /**
     * 通过房间id或者房间名删除本地缓存的数据
     * @param keywords 房间名或者id
     */
    userDelete(keywords) {
      let that = this;
      if (!isArray(that.users)) {
        return;
      }
      that.users.forEach((item, index) => {
        if (keywords === item.name || keywords === item.roomId) {
          that.users.splice(index, 1);
        }
      });
      addLocalStore(this.key, this.users);
    }
    /**
     * 添加并保存直播间
     * @param id, 房间id
     * @param name 房间名
     */
    addUser(id, name) {
      if (this.userIsExist(id) || this.userIsExist(name)) {
        alert("该房间已存在！");
        return;
      }
      if (!isArray(this.users)) {
        this.users = [];
      }
      const newUser = new HostUser(id, name);
      this.users.unshift(newUser);
      addLocalStore(this.key, this.users);
      this.resetTbody(this.users);
      handlerPromise(this.getRoomIdByUrl(local_url), (res) => {
        if (id === res) {
          this.roomIsNeedRemove(local_url);
        }
      });
    }
    /**
     * @param selector video
     */
    roomIsNeedRemove(selector = querySelector("video")) {
      this.roomAlreadyRemove();
      removeVideo(selector);
      this.settingBackgroundImage();
    }
    /*
     * 操作左侧导航栏，需要传入选择器，和修改值 建议放到公共方法下执行！
     * @param {selector}  = [选择器]
     * @param {value}  = [要修改的值]
     */
    getLeftMenu(value = false) {
      let menu = querySelector(this.menu);
      if (!menu) {
        return alert("获取不到导航菜单，操作失败！");
      }
      handlerDisplay(menu, value);
      addLocalStore(this.menu_show_key, value, Boolean.name, false);
    }
    /*
     * 操作左侧导航栏，需要传入选择器，和修改值 建议放到公共方法下执行！
     */
    isShowLeftMenu() {
      let menu = this.menu ? querySelector(this.menu) : "";
      handlerDisplay(menu, wls.getItem(this.menu_is_first_key) != null && getLocalStore(this.menu_show_key, Boolean.name));
    }
    /**
     * 检查是否能找到全屏按钮
     * @returns
     */
    checkFullScreenButton() {
      this.full_screen_button = findButton(this.video_player_container, this.full_screen_class_or_id, this.full_screen_text, this.full_button_tag_name);
    }
    /**
     * 自动全屏
     * @param isClickFull 是否是通过点击方式触发
     */
    isFullScreen(isClickFull = false) {
      let full_screen_text = this.full_screen_text;
      let full_cancel_text = this.full_cancel_text;
      let is_should_full_screen = getLocalStore(this.full_screen_key, Boolean.name);
      let button = null;
      if (isClickFull) {
        button = querySelector(this.full_screen_button);
        if (button && button instanceof HTMLElement) {
          button.click();
          this.isShowContainer();
        } else {
          this.checkFullScreenButton(button);
        }
      } else {
        loopDo((timer) => {
          button = querySelector(this.full_screen_button);
          log("fullScreen button", !!button ? "找到button了" : "未找到全屏button");
          if (button && button instanceof HTMLElement) {
            let isClick = button == null ? void 0 : button.isClick;
            if (isClick) {
              clearInterval(timer);
              return;
            }
            if (!isClick && is_should_full_screen && ((button == null ? void 0 : button.title) === full_screen_text || button.textContent === full_screen_text)) {
              log("全屏按钮自动触发了!");
              button.isClick = true;
              button.click();
            } else if ((button == null ? void 0 : button.title) === full_cancel_text || (button == null ? void 0 : button.textContent) === full_cancel_text) {
              button.click();
            }
          } else {
            this.checkFullScreenButton(button);
          }
        }, 3, 500);
      }
    }
    /**
     * 是否显示礼物
     */
    isShowGift() {
      let gift = this.gift_tool ? querySelector(this.gift_tool) : "";
      handlerDisplay(gift, wls.getItem(this.gift_is_first_key) != null && getLocalStore(this.gift_key, Boolean.name));
    }
    /**
     * 是否显示容器
     */
    isShowContainer() {
      if (this.m_container && this.m_container instanceof HTMLElement) {
        log("container change ....");
        if (this.is_new) {
          if (this.m_container.classList.contains("m-container-is-active")) {
            this.m_container.classList.remove("m-container-is-active");
          } else {
            this.m_container.classList.add("m-container-is-active");
          }
        } else {
          this.m_container.style.display = this.m_container.style.display === "block" ? "none" : "block";
        }
      }
    }
    /**
     *  点击 直播平台 Logo
     */
    clickLogoShowContainer() {
      if (this.header_logo === "none" || !this.header_logo) {
        warn("Logo选择器不能为 none ！");
        return;
      }
      let that = this;
      findMark(that.header_logo, (a) => {
        if (!(a instanceof HTMLAnchorElement)) {
          return;
        }
        a.href = "javascript:;void(0)";
        a.title = "点击Logo,显示插件配置";
        addEventListener(a, "click", (e) => {
          e.preventDefault();
          log("click header logo !");
          that.isShowContainer();
        });
        loopDo(() => {
          a = querySelector(that.header_logo);
          a.href = "javascript:;void(0)";
        }, 5, 1e3);
        log("logo点击按钮装置完毕！");
      }, 5, 500);
    }
    createSpan(container, place, id, name = id, message = "确认屏蔽up主 ", remove = true) {
      if (!container || !place || !id || !name) {
        error("createSpan 参数不全！");
        return;
      }
      const span = createElement("span");
      span.classList = "m-span-text";
      appendChild(place, span);
      addEventListener(span, "click", () => {
        if (confirm(`${message}${name} ?`)) {
          if (remove) {
            removeDOM(container, true);
          }
          this.addUser(id, name);
          this.removeRoom(local_url);
        }
      });
    }
  }
  class TriggerLive extends LivePlugin {
    constructor() {
      super();
      this.video_player_container = ".room-player-wrap";
      this.full_screen_button = ".room-player-wrap .player-fullscreen-btn";
      this.full_button_tag_name = "span";
      this.default_background_image = "https://livewebbs2.msstatic.com/huya_1682329462_content.jpg";
      this.baseUrl = "https://www.huya.com/";
      this.menu = ".mod-sidebar";
      this.header_logo = "#duya-header #duya-header-logo a";
      this.gift_tool = ".room-core #player-gift-wrap";
      this.auto_max_pro_class_or_id_list = ".player-videoline-videotype .player-videotype-list li";
      this.init();
    }
    // 首页操作
    index() {
      if (local_url === this.baseUrl || /https:\/\/.*\.huya\.*\/\?/.test(local_url)) {
        removeVideo(".mod-index-main video");
        const banner_close = querySelector(".mod-index-wrap #banner i");
        if (banner_close) {
          banner_close.click();
        }
        loopDo((timer) => {
          let pauseBtn = querySelector(".player-pause-btn");
          if (pauseBtn) {
            pauseBtn.click();
            clearInterval(timer);
          }
        }, 10, 300);
      }
    }
    // 分类页操作
    category() {
      let that = this;
      if (new RegExp(/^https:\/\/.*\.huya\.((com)|(cn))\/g(\/.*)$/).test(local_url)) {
        timeoutSelectorAllOne(".live-list-nav dd", (node) => {
          addEventListener(node, "click", () => {
            setTimeout(() => {
              that.removeRoomByClickRoomName();
            }, 2e3);
          });
        });
      }
    }
    // 公共部分操作
    common() {
      this.removeRoomByClickRoomName();
      this.addEventListenerEscEvent();
    }
    // 详情操作
    detail() {
      let that = this;
      if (new RegExp(/^https:\/\/www\.huya\.com(\/\w+)$/).test(local_url)) {
        findMark(".host-name", (hostName) => {
          hostName.title = `点击屏蔽主播【${hostName == null ? void 0 : hostName.textContent}】`;
          addEventListener(hostName, "click", () => {
            if (confirm(`确认屏蔽主播【${hostName == null ? void 0 : hostName.textContent}】？`)) {
              that.addUser(that.getRoomIdByUrl(local_url), hostName.textContent);
            }
          });
        });
        let ads = [
          ".main-wrap .room-mod-ggTop",
          "#chatRoom .room-gg-chat",
          "#huya-ab"
        ];
        intervalRemoveElement(ads, 500, 20);
        this.isFullScreen();
        this.isAutoMaxVideoPro();
      }
    }
    // 通过地址获取房间号
    getRoomIdByUrl(url = local_url) {
      try {
        return url && url.match(/https:\/\/www\.huya\.com\/(.*)/) ? url.match(/https:\/\/www\.huya\.com\/(.*)/)[1] : "";
      } catch (error2) {
        warn("url 匹配失败 请检查" + url);
        return "";
      }
    }
    // 通过房间号查找名称
    getNameByRoomId(roomId) {
      let that = this;
      let hostName = querySelector(".host-name");
      if (!hostName) {
        warn(`获取不到hostname`);
        return "";
      }
      const rooms = querySelectorAll(".game-live-item");
      if (!isArray(rooms)) {
        return "";
      }
      for (let room of rooms) {
        const a = querySelector(room, "a");
        if (a && a.href) {
          const id = that.getRoomIdByUrl(a.href);
          const user = querySelector(room, ".txt i");
          if (id === roomId) {
            hostName = user;
          }
        }
      }
      return (hostName == null ? void 0 : hostName.textContent) || "";
    }
    // 通过点击直播间名称删除直播间
    removeRoomByClickRoomName() {
      const that = this;
      timeoutSelectorAllOne(".game-live-item", (li) => {
        setTimeoutMark(li, () => {
          const a = querySelector(li, "a");
          const url = a.href;
          const user = querySelector(li, ".txt i");
          const name = user.textContent || "";
          addEventListener(user, "click", () => {
            if (confirm(`确认禁用 ${name}？`)) {
              that.addUser(that.getRoomIdByUrl(url), name);
              removeDOM(li);
            }
          });
          if (that.isRemove(url)) {
            removeDOM(li);
          }
        }, 0);
      }, 500);
    }
    /**
     * 监听esc事件
     */
    addEventListenerEscEvent() {
      let that = this;
      wd.addEventListener("keydown", function(event) {
        if (event.key === "Escape" || event.key === "Esc") {
          that.isShowGift();
        }
      });
      const full_screen_button = querySelector(that.full_screen_button);
      addEventListener(full_screen_button, "click", () => {
        that.isShowGift();
      });
    }
  }
  const getInfo = async (roomId = local_url) => {
    if (douyu_address_pattern.test(roomId)) {
      roomId = FishLive.prototype.getRoomIdByUrl(roomId);
    }
    return await fetch(`https://www.douyu.com/betard/${roomId}`, {
      mode: "cors",
      cache: "default",
      method: "GET"
    }).then((res) => res.json());
  };
  class FishLive extends LivePlugin {
    constructor() {
      super();
      this.video_player_container = "#room-html5-player";
      this.baseUrl = "https://www.douyu.com/";
      this.default_background_image = "https://sta-op.douyucdn.cn/dylamr/2022/11/07/1e10382d9a430b4a04245e5427e892c8.jpg";
      this.menu = "#js-aside";
      this.gift_tool = ".layout-Player-main #js-player-toolbar";
      this.header_logo = "#js-header .Header-left .Header-logo";
      this.auto_max_pro_class_or_id_list = "#js-player-video .room-Player-Box .rate-5c068c ul>li";
      this.init();
    }
    // 公共部分页面操作
    common() {
    }
    //首页操作
    index() {
      let that = this;
      if (window.location.href === that.baseUrl || new RegExp(/https:\/\/www\.douyu\.com\/\?.*/).test(local_url)) {
        window.scroll(0, 0);
        removeVideo(".layout-Slide-player video");
        const vbox = querySelector("#room-html5-player");
        if (vbox) {
          const divs = querySelectorAll(vbox, "div");
          if (isArray(divs)) {
            for (let div of divs) {
              if ((div == null ? void 0 : div.title) === "暂停") {
                div.click();
              }
            }
          }
        }
        that.removeRoomByClickRoomName();
        window.onscroll = throttle(500, () => {
          that.removeRoomByClickRoomName();
        });
        let topBtn = querySelector(".layout-Main .ToTopBtn");
        if (topBtn) {
          topBtn.style.display = "block";
        }
      }
    }
    // 分类页面操作
    category() {
      let that = this;
      if (new RegExp(/https:\/\/www.douyu.com(\/((directory.*)|(g_.*)))$/).test(local_url)) {
        that.removeRoomByClickRoomName();
        querySelectorAll(".layout-Module-filter .layout-Module-label");
        timeoutSelectorAllOne(".layout-Module-filter .layout-Module-label", (label) => {
          addEventListener(label, "click", (e) => {
            e.preventDefault();
            let to_link = label && label.href ? label.href : null;
            if (to_link) {
              window.location.href = to_link;
            } else {
              window.location.href = "https://www.douyu.com/g_" + local_url.match(RegExp(
                /subCate\/.*/g
              ))[0].replace("subCate", "").match(new RegExp(
                /\w+/g
              ))[0];
            }
          });
        });
      }
    }
    // 详情页操作
    detail() {
      let that = this;
      if (!new RegExp(/.*douyu.*(\/((.*rid=\d+)|(\d+)).*)$/).test(local_url)) {
        return;
      }
      findMark(".Title-roomInfo h2.Title-anchorNameH2", (hostName) => {
        hostName.title = `点击屏蔽主播【${hostName == null ? void 0 : hostName.textContent}】`;
        addEventListener(hostName, "click", () => {
          if (confirm(`确认屏蔽主播【${hostName == null ? void 0 : hostName.textContent}】？`)) {
            that.addUser(that.getRoomIdByUrl(local_url), hostName.textContent);
          }
        });
      });
      if (new RegExp(/.*douyu.*\/topic(\/(.*rid=\d+).*)/).test(local_url)) {
        let divs = querySelectorAll("#root>div");
        let backgroundNones = [".wm-general-wrapper.bc-wrapper.bc-wrapper-player", ".wm-general-bgblur"];
        if (isArray(divs)) {
          for (let element of divs) {
            if (!!querySelector(element, ".layout-Main")) {
              backgroundNone(element, backgroundNones);
            } else {
              removeDOM(element, true);
            }
          }
        }
      }
      if (new RegExp(/.*douyu.*(\/(\d+)).*/).test(local_url)) {
        findMark(".roomSmallPlayerFloatLayout-closeBtn", (closeBtn) => {
          closeBtn.click();
        });
        removeDOM(".layout-Main .ToTopBtn", true);
      }
      this.isFullScreen();
      this.isAutoMaxVideoPro();
    }
    // 通过点击直播间名称删除直播间
    removeRoomByClickRoomName() {
      let that = this;
      if (this.baseUrl === local_url || new RegExp(/https:\/\/www\.douyu\.com\/\?.*/).test(local_url)) {
        timeoutSelectorAllOne(".layout-List-item", (li) => {
          setTimeoutMark(li, () => {
            const a = querySelector(li, ".DyCover");
            const url = (a == null ? void 0 : a.href) || "";
            const user = querySelector(li, ".DyCover-user");
            const name = (user == null ? void 0 : user.textContent) || "";
            a.setAttribute("href", "javascript:;void(0)");
            addEventListener(a, "click", (e) => {
              e.preventDefault();
            });
            addEventListener(user, "click", (e) => {
              e.preventDefault();
              if (confirm(`确认禁用 ${name}`)) {
                that.addUser(that.getRoomIdByUrl(url), name);
                removeDOM(li);
              }
            });
            if (that.isRemove(url) || that.userIsExist(name)) {
              removeDOM(li);
            }
          }, 100);
        }, 100);
      }
      if (new RegExp(/https:\/\/www.douyu.com(\/((directory)|(g_)).*)/).test(local_url)) {
        timeoutSelectorAllOne(".layout-Cover-item", (li) => {
          setTimeoutMark(li, () => {
            const link = querySelector(li, "a.DyListCover-wrap");
            if (link) {
              const url = (link == null ? void 0 : link.href) || "";
              link.setAttribute("href", "javascript:;void(0)");
              addEventListener(link, "click", (e) => {
                e.preventDefault();
              });
              const user = querySelector(link, "div.DyListCover-userName");
              const name = user.textContent || "";
              if (that.isRemove(url) || that.userIsExist(name)) {
                removeDOM(li, true);
              } else {
                addEventListener(user, "click", (e) => {
                  if (confirm(`确认禁用 ${name}？`)) {
                    const id = that.getRoomIdByUrl(url);
                    that.addUser(id, name);
                    removeDOM(li);
                  }
                  e.preventDefault();
                });
                addEventListener(li, "mouseenter", (e) => {
                  const a = querySelector(e.target, "a.DyListCover-wrap.is-hover");
                  const url2 = a == null ? void 0 : a.href;
                  a.setAttribute("href", "javascript:;void(0)");
                  addEventListener(a, "click", (e2) => {
                    e2.preventDefault();
                  });
                  const user2 = querySelector(a, ".DyListCover-userName");
                  const name2 = user2.textContent || "";
                  addEventListener(user2, "click", (e2) => {
                    e2.preventDefault();
                    if (confirm(`确认禁用 ${name2}？`)) {
                      const id = that.getRoomIdByUrl(url2);
                      that.addUser(id, name2);
                      removeDOM(li);
                    }
                  });
                });
              }
            }
          }, 100);
        }, 0);
      }
    }
    // 通过房间号获取直播间name
    async getNameByRoomId(keywords) {
      var _a;
      let that = this;
      let searchResult = await getInfo(keywords);
      if ((searchResult == null ? void 0 : searchResult.room) && ((_a = searchResult == null ? void 0 : searchResult.room) == null ? void 0 : _a.nickname)) {
        log(`搜索到主播 ${searchResult.room.nickname}`);
        return searchResult.room.nickname;
      }
      let hostName = querySelector(".Title-blockInline .Title-anchorName h2");
      let rooms = null;
      if (!hostName) {
        rooms = querySelectorAll(".layout-List-item");
        if (isArray(rooms)) {
          for (let room of rooms) {
            const id = that.getRoomIdByUrl(querySelector(room, "a").href);
            const user = querySelector(room, ".DyCover-user");
            if (id === keywords) {
              hostName = user;
            }
          }
        }
        if (!hostName) {
          rooms = querySelectorAll(".layout-Cover-item");
          if (isArray(rooms)) {
            for (let room of rooms) {
              const id = that.getRoomIdByUrl(querySelector(room, "a").href);
              const user = querySelector(room, ".DyListCover-userName");
              if (id === keywords) {
                hostName = user;
              }
            }
          }
        }
      }
      return (hostName == null ? void 0 : hostName.textContent) || "";
    }
    // 通过房间地址获取房间号
    getRoomIdByUrl(url = local_url) {
      try {
        if (new RegExp(/.*rid=(\d+).*/).test(url)) {
          return url.match(new RegExp(/rid=(\d+)/))[1];
        }
        if (/https:\/\/www\.douyu\.com\/(\d+).*/.test(url)) {
          return url.match(new RegExp(/https:\/\/www\.douyu\.com\/(\d+)/))[1];
        }
        return null;
      } catch (e) {
        return null;
      }
    }
    // isAutoMaxVideoPro() {
    //     if (!(wls.getItem(this.is_first_auto_max_pro_key) === null ? true : getLocalStore(this.auto_max_pro_key, Boolean.name))) {
    //         return;
    //     }
    //     log('自动全屏查找中...')
    //     const parent_container = `#js-player-video .room-Player-Box`
    //     let default_class = '.rate-5c068c'
    //
    //     const check = () => {
    //         return findButton(parent_container, default_class, "清晰度", "div")
    //     }
    //     loopDo((timer) => {
    //         const nodes = querySelectorAll(`${parent_container} ${default_class} ul li`)
    //         log('查找结果',nodes)
    //         if (isArray(nodes)) {
    //             nodes[0].click()
    //             clearInterval(timer)
    //         } else {
    //             default_class = check()
    //         }
    //
    //     }, 20, 1000)
    //
    //
    // }
  }
  const getBiliBiliInfoByVideoID = async (url = window.location.href) => {
    if (!url) {
      return;
    }
    let videoBVId = "BV";
    if (/.*\/BV(.*)/.test(url)) {
      videoBVId += /.*\/BV(.*)\/.*/.test(url) ? url.match(/.*\/BV(.*)/)[1].match(/(.*)\/{1}.*/)[1] : url.match(/.*\/BV(.*)/)[1];
    } else {
      videoBVId = url;
    }
    return await fetch(`https://api.bilibili.com/x/web-interface/wbi/view?bvid=${videoBVId}`, {
      method: "get",
      mode: "cors"
    }).then((res) => res.json());
  };
  class BiliBili extends LivePlugin {
    constructor() {
      super();
      this.header_logo = ".bili-header .bili-header__bar ul>li>a";
      this.video_player_container = "#bilibili-player";
      this.fullScreenText = "进入全屏 (f)";
      this.auto_max_pro_class_or_id_list = ".bpx-player-ctrl-btn.bpx-player-ctrl-quality .bpx-player-ctrl-quality-menu>.bpx-player-ctrl-quality-menu-item";
      this.init();
    }
    /**
     * 重写 button
     * @returns
     */
    createButton() {
      let that = this;
      if (!!that.logo_btn) {
        return;
      }
      let buttonBoxs = querySelector(".palette-button-wrap .storage-box .storable-items");
      let btn = createElement("button");
      btn.className = "primary-btn";
      btn.style.fontSize = "16px";
      if (!buttonBoxs) {
        buttonBoxs = querySelector("div.fixed-sidenav-storage");
        if (!buttonBoxs) {
          console.log("暂不支持...");
          return;
        }
        btn = createElement("div");
        btn.style.display = "none";
        btn.className = "m-bilibili-btn";
        window.onscroll = () => {
          if (window.scrollY >= 500) {
            btn.style.display = "block";
          } else {
            btn.style.display = "none";
          }
        };
      }
      btn.title = "点击显示";
      btn.innerHTML = iconLogo();
      that.logo_btn = btn;
      addEventListener(btn, "click", function() {
        that.isShowContainer();
      });
      insertChild(buttonBoxs, that.logo_btn);
    }
    async getRoomIdByUrl(href) {
      var _a, _b;
      try {
        if (/https:\/\/www.bilibili.com\/video\/.*/.test(local_url)) {
          let result = await getBiliBiliInfoByVideoID(local_url);
          if (result.code === 0 && ((_a = result == null ? void 0 : result.owner) == null ? void 0 : _a.mid)) {
            return (_b = result == null ? void 0 : result.owner) == null ? void 0 : _b.mid;
          }
        }
        if (/https:\/\/space\.bilibili\.com\/(\d+).*/.test(href)) {
          return href.match(/https:\/\/space\.bilibili\.com\/(\d+)/)[1];
        }
      } catch (error2) {
      }
      return this.getBilibiliRoomId(href);
    }
    getBilibiliRoomId(href) {
      return !!href && href.replace(/https:\/\/.*\.bilibili.com\/(.*?)/, "$1").replace(/\//ig, "");
    }
    // 添加删除按钮
    addDeleteRoomButton(time = 1e3) {
      timeoutSelectorAll(".feed-card", (divs) => {
        var _a, _b;
        for (let feed of divs) {
          const isMark = !!querySelector(feed, ".m-span-text");
          if (!isMark) {
            let item = querySelector(feed, "div.bili-video-card__info--bottom");
            const name = (_a = querySelector(item, "span.bili-video-card__info--author")) == null ? void 0 : _a.textContent;
            const href = (_b = querySelector(item, ".bili-video-card__info--owner")) == null ? void 0 : _b.href;
            const id = this.getBilibiliRoomId(href);
            if (this.userIsExist(id) || this.userIsExist(name)) {
              removeDOM(feed, true);
            } else if (id && name) {
              this.createSpan(feed, item, id, name);
            }
          }
        }
      }, time);
      window.onscroll = throttle(500, () => {
        timeoutSelectorAll(".bili-video-card", (divs) => {
          var _a, _b, _c, _d;
          for (let feed of divs) {
            const isMark = !!querySelector(feed, ".m-span-text");
            if (!isMark) {
              let item = querySelector(feed, "div.bili-video-card__info--bottom");
              let isLive = false;
              if (!item) {
                isLive = true;
                item = querySelector(feed, ".bili-live-card__info--text");
              }
              const name = !isLive ? (_a = querySelector(item, "span.bili-video-card__info--author")) == null ? void 0 : _a.textContent : (_b = querySelector(item, "a.bili-live-card__info--uname span")) == null ? void 0 : _b.textContent;
              const href = !isLive ? (_c = querySelector(item, ".bili-video-card__info--owner")) == null ? void 0 : _c.href : (_d = querySelector(item, "a.bili-live-card__info--uname")) == null ? void 0 : _d.href;
              const id = this.getBilibiliRoomId(href);
              if (this.userIsExist(name) || this.userIsExist(id)) {
                removeDOM(feed, true);
              } else if (id && name) {
                this.createSpan(feed, item, id, name);
              }
            }
          }
        }, time);
      });
    }
    clickLogoShowContainer() {
      let that = this;
      super.clickLogoShowContainer();
      window.onscroll = () => {
        if (parseInt(window.scrollY) > 90) {
          operationLogo();
        } else {
          super.clickLogoShowContainer();
        }
      };
      const operationLogo = () => {
        findMark(that == null ? void 0 : that.header_logo, (logo) => {
          logo.setAttribute("href", "javascript:;void(0)");
          logo.setAttribute("title", "点击Logo，显示插件配置");
          addEventListener(logo, "click", (e) => {
            e.preventDefault();
            that.isShowContainer();
          });
        });
      };
    }
    common() {
      let that = this;
      that.addDeleteRoomButton(1e3);
      setTimeout(() => {
        const refreshButton = querySelector(".feed-roll-btn .primary-btn");
        addEventListener(refreshButton, "click", () => {
          that.addDeleteRoomButton(200);
        });
      }, 3e3);
    }
    index() {
    }
    detailLeftVideoList(time = 1e3, sel = ".video-page-card-small") {
      timeoutSelectorAll(sel, (videoList) => {
        var _a;
        for (let videoDom of videoList) {
          const isMark = !!videoDom.getAttribute("mark");
          videoDom.setAttribute("mark", true);
          const playinfo = querySelector(videoDom, ".playinfo");
          const link = querySelector(videoDom, ".upname a");
          const id = !!link && (link == null ? void 0 : link.href) && this.getBilibiliRoomId(link.href);
          const name = (_a = querySelector(videoDom, ".upname .name")) == null ? void 0 : _a.textContent;
          if (this.userIsExist(id) || this.userIsExist(name)) {
            removeDOM(videoDom, true);
          } else if (!isMark && id && name) {
            const span = createElement("span");
            span.classList = "m-span-text";
            addEventListener(span, "click", () => {
              if (confirm("确认删除up主 " + name + " ?")) {
                removeDOM(videoDom, true);
                this.addUser(id, name);
                this.detailLeftVideoList(0);
              }
            });
            appendChild(playinfo, span);
          }
        }
      }, time);
    }
    async detail() {
      var _a, _b;
      if (new RegExp(/https:\/\/www\.bilibili\.com\/video\/(.*)/).test(local_url)) {
        this.detailLeftVideoList(100, ".video-page-operator-card-small");
        this.detailLeftVideoList();
        const nextBtn = querySelector(".rec-footer");
        addEventListener(nextBtn, "click", () => {
          this.detailLeftVideoList(0);
        });
      }
      if (/https:\/\/www.bilibili.com\/video\/.*/.test(local_url)) {
        this.isFullScreen();
        this.isAutoMaxVideoPro();
        let result = await getBiliBiliInfoByVideoID(local_url);
        console.log("视频查询结果详情:", result);
        if (result.code === 0 && this.userIsExist((_a = result == null ? void 0 : result.owner) == null ? void 0 : _a.mid) || this.userIsExist((_b = result == null ? void 0 : result.owner) == null ? void 0 : _b.name)) {
          this.roomIsNeedRemove();
        }
      }
    }
    async getNameByRoomId(bvId) {
      var _a, _b;
      let result = await getBiliBiliInfoByVideoID(bvId);
      if (result.code === 0) {
        return (_b = (_a = result == null ? void 0 : result.data) == null ? void 0 : _a.owner) == null ? void 0 : _b.name;
      }
    }
  }
  class DouYin extends LivePlugin {
    constructor() {
      super();
      this.header_logo = "#root .N_HNXA04 .HQwsRJFy a";
      this.full_screen_class_or_id = ".xgplayer-page-full-screen .xgplayer-icon";
      this.full_button_tag_name = "div";
      this.full_screen_text = "进入全屏";
      this.full_cancel_text = "退出全屏";
      this.auto_max_pro_class_or_id_list = "#slidelist .gear .virtual>.item";
      this.init();
    }
    removeRoomByClickRoomName() {
      this.notSupport();
    }
    getNameByRoomId(roomId) {
      return this.notSupport();
    }
    getRoomIdByUrl(url) {
      return this.notSupport();
    }
    notSupport() {
      log("抖音暂时不支持该操作！");
      return null;
    }
    common() {
      this.isFullScreen();
      this.isAutoMaxVideoPro();
    }
  }
  const css$4 = `
.m-container,
  .m-container .btn,
  .m-container table,
  .m-container table tbody,
  .m-container table thead,
  .m-container table tr {
    margin: 0 !important;
    padding: 0 !important;
    border: none;
    outline: none;
  }
  
  .m-container {
    --m-font-color: #fff;
    --m-container-background-color: #fff;
    --m-container-width: 700px;
    --m-container-height: 400px;
    --m-container-operation-right-width: 150px;
    --m-container-input-width: 150px;
    --m-container-box-transition: all 0.4s ease-in-out;
    --m-container-select-width: var(--m-container-input-width);
    --m-container-input-outline: 1px solid rgba(8, 125, 235, 0.6) !important;
  }
  
  .m-container {
    box-sizing: border-box !important;
    position: fixed !important;
    flex-direction: column !important;
    width: var(--m-container-width) !important;
    height: var(--m-container-height) !important;
    top: 100px !important;
    left: 50% !important;
    border-radius: 10px !important;
    overflow: hidden !important;
    background-color: var(--m-container-background-color) !important;
    z-index: 100000000 !important;
    padding: 15px !important;
    transition: var(--m-container-box-transition) !important;
    box-shadow: 20px 20px 10px rgba(0, 0, 0, 0.1),
      -1px -2px 18px rgba(0, 0, 0, 0.1) !important;
  
    opacity: 0;
    transform: translate(-50%, -150%);
  }
  
  .m-container-is-active {
    opacity: 1;
    transform: translate(-50%, 0%);
    z-index:100000000 !important;
  }
  
  .m-container-box {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: 100% !important;
  }
  
  .m-container .operation {
    box-sizing: border-box !important;
    height: auto !important;
    justify-content: start !important;
  }
  
  
  .m-container input[type="text"] {
    width: var(--m-container-input-width) !important;
    box-sizing: border-box !important;
    border: 1px solid rgba(8, 125, 235, 0.6) !important;
    outline: none !important;
    padding: 5px 10px !important;
    border-radius: 20px !important;
    transition: var(--m-container-box-transition);
  }
  
  .m-container input:focus {
    border: 1px solid rgba(8, 125, 235, 1) !important;
  }
  
  .m-container .operation input[type="checkbox"] {
    display: inline !important;
  }
  
  .m-container .operation input[type="file"] {
    display: none !important;
  }
  
  .m-container table {
    position: relative !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    text-align: left !important;
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
  }
  
  .m-container table tr {
    margin: 5px 0 !important;
    display: flex !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.4) !important;
    justify-content: space-between;
  }
  
  .m-container table tr td:nth-child(1),
  .m-container table thead th:nth-child(1) {
    width: 50px;
    text-align: center !important;
  }
  
  .m-container table tr td:nth-child(2),
  .m-container table tr td:nth-child(3),
  .m-container table tr td:nth-child(4),
  .m-container table thead th:nth-child(2),
  .m-container table thead th:nth-child(3),
  .m-container table thead th:nth-child(4) {
    flex: 1 !important;
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  .m-container table tbody {
    flex: 1 !important;
    overflow: auto !important;
  }
  
  .m-container table th,
  .m-container table td {
    padding: 10px !important;
  }
  
  .m-container table tbody tr:nth-child(1) {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4) !important;
  }
  
  .m-container .m-link,
  .m-container .m-link:visited {
    color: blnk !important;
  }
  
  .m-container .m-link:hover {
    color: blue !important;
    text-decoration: underline !important;
  }
  
  .m-container .btn {
    cursor: pointer !important;
    padding: 5px 8px !important;
    border: none !important;
    max-width:50px !important;
    color: var(--m-font-color) !important;
    font-size: 1rem !important;
    border-radius: 20px !important;
    margin: 0 !important;
    background-color: rgba(166, 169, 173, 1) !important;
    z-index: 1000 !important;
    outline: none !important;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4), 0px 0px 1px rgba(0, 0, 0, 0.4) !important;
  }
  
  .m-container .btn:hover {
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1) !important;
  }
  
  .m-container .btn:hover {
    background-color: rgba(166, 169, 173, 0.6) !important;
  }
  
  .m-container .btn-primary {
    background-color: rgba(64, 158, 255, 1) !important;
  }
  
  .m-container .btn-primary:hover {
    background-color: rgba(64, 158, 255, 0.6) !important;
  }
  
  .m-container .btn-success {
    background-color: rgba(103, 194, 58, 1) !important;
  }
  
  .m-container .btn-success:hover {
    background-color: rgba(103, 194, 58, 0.6) !important;
  }
  
  .m-container .btn-info {
    background-color: rgba(119, 119, 119, 1) !important;
  }
  
  .m-container .btn-info:hover {
    background-color: rgba(119, 119, 119, 0.6) !important;
  }
  
  .m-container .btn-warning {
    background-color: rgba(230, 162, 60, 1) !important;
  }
  
  .m-container .btn-warning:hover {
    background-color: rgba(230, 162, 60, 0.6) !important;
  }
  
  .m-container .btn-danger {
    background-color: rgba(245, 108, 108, 1) !important;
  }
  
  .m-container .btn-danger:hover {
    background-color: rgba(245, 108, 108, 0.6) !important;
  }
  
  #m-container-box1 {
    position: absolute !important;
    z-index: 10000000 !important;
    transition: var(--m-container-box-transition) !important;
    width: 100% !important;
    height: 100% !important;
  }
  
  #m-container-box2 {
    position: absolute !important;
    z-index: 9999 !important;
    transition: var(--m-container-box-transition) !important;
    ;
    width: 100% !important;
    height: 100% !important;
  }
  
  .m-ani-left-is-active {
    transform: translateX(0) !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  .m-ani-left-is-close {
    transform: translateX(-100%) !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .m-ani-right-is-active {
    transform: translateX(0) !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  .m-ani-right-is-close {
    transform: translateX(100%) !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .m-type-container .m-type-item {
    display: flex !important;
    height: 30px !important;
  }
  
  .m-type-container .m-type-item .m-type-item-left {
    flex: 1 !important;
    position: relative !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
  }
  
  .m-type-container .m-type-item .m-type-item-right {
    width: var(--m-container-operation-right-width);
    text-align: center !important;
  }
  
  .m-type-container .m-type-item .m-type-item-left .m-select-option-container,
  .m-type-container .m-type-item .m-type-item-left .m-select-input-container {
    transition: var(--m-container-box-transition) !important;
    position: absolute !important;
    width: 100% !important;
  }
  
  .m-type-container .m-select {
    display: flex !important;
  }
  
  .m-type-container .m-select .m-select-item {
    margin-right: 10px !important;
  }
  
  .m-type-container .m-select .m-select-item:last-child {
    margin-right: 0 !important;
  }
  
  .m-type-container .m-select select {
    width: 100px !important;
    color: rgba(119, 119, 119, 0.9) !important;
  }
  
  .m-type-container .m-select select::placeholder {
    color: rgba(119, 119, 119, 0.9) !important;
  }
  
  .m-type-container .m-tag-select {
    width: calc(var(--m-container-select-width)/2) !important;
    outline: none !important;
    border: 1px solid rgba(8, 125, 235, 0.6) !important;
    padding: 5px 8px !important;
    padding: 5px 10px !important;
  }
  
  .m-container select {
    border: 1px solid rgba(8, 125, 235, 1) !important;
  }
  
  
  .m-type-container .m-select .m-option-default {
    color: rgba(119, 119, 119, 0.6) !important;
  }
  
  .m-type-container input[type="text"] {
    width: 350px !important;
  }
  
  .m-type-container .m-select input {
    width: var(--m-container-input-width) !important;
  }
  
  .m-type-container .m-search-msg {
    color: red !important;
  }
  
  .m-span-text {
      transition: all 0.3s ease;
      cursor: pointer !important;
      opacity: 0;
      float:right;
      display:inline-block;
      margin:0 10px;
      transform: scale(0.5);
      font-size:20px;
      position:relative;
  }

  .m-span-text::before{
      content:"🧹";
      cursor: pointer !important;
  }
  
  .m-container-display-block{
     display:block !important;
  }
  .m-container-display-none{
     display:none !important;
  }


`;
  const css$3 = is_douyu ? `

.layout-List-item .DyCover-content .DyCover-user,.layout-Cover-item .DyListCover-userName,.Title-blockInline .Title-anchorName h2{
  cursor:pointer !important;
}
.layout-List-item .DyCover-content .DyCover-user:hover,.layout-Cover-item .DyListCover-userName:hover,.Title-blockInline .Title-anchorName h2:hover {
  color:rgb(255, 135, 0) !important;
}

.layout-Section.layout-Slide .layout-Slide-player,
.layout-Slide-bannerInner,
#lazyModule3,
#lazyModule4,
#lazyModule5,
#lazyModule6,
#lazyModule7,
#lazyModule8,
#lazyModule23,
#lazyModule24,
#js-room-activity,
#js-right-nav,
#js-bottom,
#js-header .Header .HeaderNav,
#js-header .Header .HeaderGif-left,
#js-header .Header .HeaderGif-right,
.Header-download-wrap,
.AnchorInterToolsUser,
.RechangeJulyPopups,
li.Header-menu-link,
.layout-Main .layout-Customize,
.HeaderCell-label-wrap,
.Title-AnchorLevel,.RoomVipSysTitle,
.Aside-nav .Aside-nav-item,
.Title-roomInfo .Title-row,
#player-marvel-controller+div,
.layout-Player-main .GuessGameMiniPanelB-wrapper,
#js-player-asideMain #layout-Player-aside .FirePower,
.layout-Player-video .layout-Player-videoAbove .ChargeTask-closeBg,
#bc4-bgblur,
.Baby-image.is-achievement,
.multiBitRate-da4b60{
  display:none !important;
}


li.Header-menu-link:nth-child(1),
li.Header-menu-link:nth-child(2),
li.Header-menu-link:nth-child(3),
.Aside-nav .Aside-nav-item:nth-child(1)
{
  display:inline-block !important;
}

.layout-Player-aside .layout-Player-chat,.layout-Player-aside .layout-Player-chat .ChatToolBar {
display:block !important;
}


.Barrage-main  .UserLevel,
.Barrage-main  .js-user-level,
.Barrage-main  .Barrage-icon,
.Barrage-main  .Motor,
.Barrage-main  .Motor-flag,
.Barrage-main  .Barrage-hiIcon,
.Barrage-main  .UserGameDataMedal,
.Barrage-main  .ChatAchievement,
.Barrage-main  .Barrage-notice,
.layout-Player .layout-Player-announce,
.layout-Player .layout-Player-rank,
.MatchSystemTeamMedal,
#js-player-video .ScreenBannerAd,
.layout-Main #layout-Player-aside .BarrageSuspendedBallAd,
.layout-Main #layout-Player-aside .SignBarrage,
#js-player-video-case .VRTips~div,
.layout-Main .Title-roomInfo .Title-row,
.layout-Main .ToTopBtn,
.Header-right .public-DropMenu-drop .DropPane-ad,
.Header-right .CloudGameLink,
.Header-menu-wrap .DropMenuList-ad,
.public-DropMenu-drop-main div.Header-UserPane-top~div,
#js-player-dialog .LiveRoomLoopVideo,
.Header-search-wrap .Search  label,
.RedEnvelopAd.RedEnvelopAdMouseDisable,
.Barrage .Barrage-userEnter{
display:none !important;
}

/* 一般禁用模式 */
.layout-Player-main #js-player-toolbar{
display:block;
}
#root div.layout-Main{
  margin-top:70px !important;
  display:block !important;
  width:auto !important;
  max-width:auto !important;
}
#root>div,
#root>div .wm-general-bgblur
{
background-image:none !important;
}

.Title-roomInfo .Title-row:nth-child(1),
.Title-roomInfo .Title-row:nth-child(2) {
 display:block !important;
}

 .layout-Player-main .Title-roomInfo .is-normal .Title-blockInline,
 .layout-Player-main .Title-roomInfo .is-normal:nth-child(2)

  {
  display:none !important;
}

.layout-Player-main .Title-roomInfo .is-normal .Title-blockInline:nth-child(0),
.layout-Player-main .Title-roomInfo .is-normal .Title-blockInline:nth-child(1),
.layout-Player-main .Title-roomInfo .is-normal .Title-blockInline:nth-child(2)
 {
  display:inline-block !important;
 }

.Barrage-main .Barrage-content {
color:#333 !important;
}
.Barrage-main .Barrage-nickName{
color:#2b94ff !important;
}
.Barrage-listItem{
color: #333 !important;
background-color: #f2f5f6 !important;
}

.Header-search-wrap input#header-search-input::placeholder {
   color: transparent !important;
   opacity:0 !important;
}

#js-aside,
.layout-Player-main #js-player-toolbar {
   display:none;
}
` : "";
  const css$2 = is_huya ? `

.game-live-item i,.host-name {
  cursor:pointer;
}
.game-live-item .txt i:hover,.host-name:hover {
  color:rgb(255, 135, 0);
}
.helperbar-root--12hgWk_4zOxrdJ73vtf1YI,
.mod-index-wrap .mod-index-main .main-bd,
.mod-index-wrap .mod-index-main .main-hd,
.mod-index-wrap #js-main,
.mod-index-wrap #banner,
.mod-index-wrap .mod-game-type,
.mod-index-wrap .mod-actlist,
.mod-index-wrap .mod-news-section,
.mod-index-wrap .mod-index-list .live-box #J_adBnM,
.mod-index-wrap .mod-index-recommend,
.mod-index-wrap .mod-news-section,
.mod-index-wrap .recommend-wrap,
.RoomPublicMessage--n3v61Bk0DehYuR0xEQ9S1,
#huya-ab-fixed,
#huya-ab,
.liveList-header-r,
.room-footer,
.J_roomSideHd,
 #J_roomSideHd,
 #match-cms-content,
 #matchComponent2,
.hy-nav-item,
.list-adx,
.layout-Banner,
 #J_duyaHeaderRight>div>div>div,
 .nav-expand-list .third-clickstat,
 #main_col .special-bg,
 .player-recommend.recommend-ab-mode .end-ab-wrap,
 .chat-wrap-panel.wrap-income,
 .match-room .match-nav,
 .host-detail.J_roomHdDetail span,
 .host-detail.J_roomHdDetail .host-video,
 .room-hd-r .jump-to-phone,
 .room-hd-r #share-entrance,
 .room-hd-r #J_illegalReport,
 .room-hd-r .gamePromote.J_gamePromote,
 .main-wrap .room-mod-ggTop,
 #chatRoom .room-gg-chat,
 .room-core .room-business-game,
 .room-backToTop.j_room-backToTop,
.room-weeklyRankList{
    display:none !important;
 }

 .ssr-wrapper .mod-sidebar, .room-core #player-gift-wrap, {
   display:none;
 }

 .hy-nav-item:nth-child(1),
 .hy-nav-item:nth-child(2),
 .hy-nav-item:nth-child(3),
 #J_duyaHeaderRight>div>div>div:nth-child(3){
   display:inline-block !important;
 }
 .mod-index-wrap .mod-index-list{
   margin-top:80px !important;
 }
 .duya-header{
   background: hsla(0,0%,100%,.95)  !important;
   border-bottom: 1px solid #e2e2e2 !important;
   box-shadow: 0 0 6px rgb(0 0 0 / 6%) !important;
 }
 .duya-header a,.duya-header i{
  color:#000 !important;
 }
 /*******直播间样式*****/
.chat-room__list .msg-normal,.chat-room__list .msg-bubble,#J_mainRoom{
   background:none !important;
 }
 #wrap-ext,
.chat-room__list .msg-normal-decorationPrefix,
.chat-room__list .msg-normal-decorationSuffix,
.chat-room__list .msg-bubble-decorationPrefix,
.chat-room__list img,
.chat-room__list .msg-noble,
.chat-room__list .msg-sys,
.chat-room__list .msg-auditorSys,
.J_box_msgOfKing,
.chat-room__list .msg-onTVLottery{
    display: none !important;
 }
.chat-room__list .msg-bubble span.msg{
    color: #333 !important;
    background:none!important;
 }
.chat-room__list .msg-bubble .colon,
.chat-room__list .msg-bubble .msg,
.chat-room__list .name{
    color: #3c9cfe !important;
    background:none!important;
  }

  #search-bar-input::placeholder{
     color: transparent !important;
     opacity:0 !important;
  }
  
 .mod-sidebar,
.room-core #player-gift-wrap{
  display:none ;
}

 #player-ctrl-wrap {
  opacity: 0;
  transition: all 500ms ease-in 0s !important;
  bottom: 16px;
 }
#J_playerMain:hover #player-ctrl-wrap{
   opacity: 1;
}

` : "";
  const css$1 = is_douyin ? `
    #related-video-card-login-guide,
    #captcha_container,
    .JsAsIOEV,
    #login-full-panel{
       display:none !important;
    }
  .m-container {
    --m-container-height: 56px;
  }

  .m-container table {
    display: none !important;
  }
  
` : "";
  const css = is_bilibili ? `
div#i_cecream .floor-single-card,
div#i_cecream .bili-live-card.is-rcmd,
div#i_cecream .adblock-tips,
div.video-container-v1 div.pop-live-small-mode.part-undefined,
.recommended-swipe.grid-anchor,
.video-page-special-card-small
{
   display:none !important;
}

/* 输入框*/
.nav-search-content>input::placeholder {
   color: transparent;
   opacity:0 !important;
}

.m-bilibili-btn {
   cursor: pointer !important;
   background: #FFFFFF !important;
   background: var(--bg1_float) !important;
   border: 1px solid #E3E5E7 !important;
   border: 1px solid var(--line_regular) !important;
   border-radius: 8px !important;
   box-sizing: border-box !important;
   padding: 6px !important;
   margin-bottom: 6px !important;
   color: #18191C !important;
   color: var(--text1) !important;
   line-height: 14px;
   font-size: 12px;
   display: flex;
   flex-direction: column;
   align-items: center;
   width: 40px;
}

.bili-video-card__info--bottom:hover .m-span-text,
.video-page-card-small:hover .m-span-text,
.up-info-container:hover .m-span-text,
.video-page-operator-card-small:hover .m-span-text
{
   opacity: 1;
   transform: scale(1.1);
   color:orange;
}
` : "";
  addStyle(
    `
${css$4}
${css$3}
${css$2}
${css}
${css$1}
`
  );
  (function() {
    if (typeof window == "undefined") {
      return;
    }
    window.onload = () => {
      try {
        let text = "%c欢迎使用直播插件,下载地址%c";
        if (!is_localhost) {
          console.clear();
        }
        console.log(
          text.concat(download_plugin_url, ""),
          "background: rgb(255, 93, 35); padding: 1px; border-radius: 3px 0 0 3px; color: #fff",
          "border-radius: 0 3px 3px 0; color: #fff"
        );
        console.log(
          "%c地址:%c ".concat(source_code_url, ""),
          "background: rgb(255, 93, 35); padding: 1px; border-radius: 3px 0 0 3px; color: #fff",
          "border-radius: 0 3px 3px 0; color: #fff"
        );
        if (is_huya) {
          new TriggerLive();
        } else if (is_douyu) {
          new FishLive();
        } else if (is_bilibili) {
          new BiliBili();
        } else if (is_douyin) {
          new DouYin();
        } else if (is_localhost) {
          new LivePlugin();
        } else {
          error("插件地址不适配，请检查匹配地址！！！");
        }
      } catch (e) {
        error(e);
      }
    };
  })();

})();
